module.exports=function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e['default']}:function(){return e};return n.d(t,'a',t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p='',n(n.s=4)}([function(e,n){function t(e,n,t){if(n in e)return e[n];if(3===arguments.length)return t;throw new Error('"'+n+'" is a required argument.')}function r(e){var n=e.match(m);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function o(e){var n='';return e.scheme&&(n+=e.scheme+':'),n+='//',e.auth&&(n+=e.auth+'@'),e.host&&(n+=e.host),e.port&&(n+=':'+e.port),e.path&&(n+=e.path),n}function i(e){var t=e,a=r(e);if(a){if(!a.path)return e;t=a.path}for(var d,u=n.isAbsolute(t),s=t.split(/\/+/),m=0,l=s.length-1;0<=l;l--)d=s[l],'.'===d?s.splice(l,1):'..'===d?m++:0<m&&(''===d?(s.splice(l+1,m),m=0):(s.splice(l,2),m--));return t=s.join('/'),''===t&&(t=u?'/':'.'),a?(a.path=t,o(a)):t}function a(e,n){''===e&&(e='.'),''===n&&(n='.');var t=r(n),a=r(e);if(a&&(e=a.path||'/'),t&&!t.scheme)return a&&(t.scheme=a.scheme),o(t);if(t||n.match(l))return n;if(a&&!a.host&&!a.path)return a.host=n,o(a);var d='/'===n.charAt(0)?n:i(e.replace(/\/+$/,'')+'/'+n);return a?(a.path=d,o(a)):d}function d(e){return e}function u(e){if(!e)return!1;var n=e.length;if(9>n)return!1;if(95!==e.charCodeAt(n-1)||95!==e.charCodeAt(n-2)||111!==e.charCodeAt(n-3)||116!==e.charCodeAt(n-4)||111!==e.charCodeAt(n-5)||114!==e.charCodeAt(n-6)||112!==e.charCodeAt(n-7)||95!==e.charCodeAt(n-8)||95!==e.charCodeAt(n-9))return!1;for(var t=n-10;0<=t;t--)if(36!==e.charCodeAt(t))return!1;return!0}function s(e,n){return e===n?0:null===e?1:null===n?-1:e>n?1:-1}n.getArg=t;var m=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,l=/^data:.+\,.+$/;n.urlParse=r,n.urlGenerate=o,n.normalize=i,n.join=a,n.isAbsolute=function(e){return'/'===e.charAt(0)||m.test(e)},n.relative=function(e,n){''===e&&(e='.'),e=e.replace(/\/$/,'');for(var t,i=0;0!==n.indexOf(e+'/');){if(t=e.lastIndexOf('/'),0>t)return n;if(e=e.slice(0,t),e.match(/^([^\/]+:\/)?\/*$/))return n;++i}return Array(i+1).join('../')+n.substr(e.length+1)};var p=function(){var e=Object.create(null);return!('__proto__'in e)}();n.toSetString=p?d:function(e){return u(e)?'$'+e:e},n.fromSetString=p?d:function(e){return u(e)?e.slice(1):e},n.compareByOriginalPositions=function(e,n,t){var i=s(e.source,n.source);return 0===i?(i=e.originalLine-n.originalLine,0!==i)?i:(i=e.originalColumn-n.originalColumn,0!==i||t)?i:(i=e.generatedColumn-n.generatedColumn,0!==i)?i:(i=e.generatedLine-n.generatedLine,0===i?s(e.name,n.name):i):i},n.compareByGeneratedPositionsDeflated=function(e,n,t){var i=e.generatedLine-n.generatedLine;return 0===i?(i=e.generatedColumn-n.generatedColumn,0!==i||t)?i:(i=s(e.source,n.source),0!==i)?i:(i=e.originalLine-n.originalLine,0!==i)?i:(i=e.originalColumn-n.originalColumn,0===i?s(e.name,n.name):i):i},n.compareByGeneratedPositionsInflated=function(e,n){var t=e.generatedLine-n.generatedLine;return 0===t?(t=e.generatedColumn-n.generatedColumn,0!==t)?t:(t=s(e.source,n.source),0!==t)?t:(t=e.originalLine-n.originalLine,0!==t)?t:(t=e.originalColumn-n.originalColumn,0===t?s(e.name,n.name):t):t},n.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,''))},n.computeSourceURL=function(e,n,t){if(n=n||'',e&&('/'!==e[e.length-1]&&'/'!==n[0]&&(e+='/'),n=e+n),t){var d=r(t);if(!d)throw new Error('sourceMapURL could not be parsed');if(d.path){var u=d.path.lastIndexOf('/');0<=u&&(d.path=d.path.substring(0,u+1))}n=a(o(d),n)}return i(n)}},function(e,n,t){function i(e){e||(e={}),this._file=o.getArg(e,'file',null),this._sourceRoot=o.getArg(e,'sourceRoot',null),this._skipValidation=o.getArg(e,'skipValidation',!1),this._sources=new a,this._names=new a,this._mappings=new d,this._sourcesContents=null}var r=t(2),o=t(0),a=t(3).ArraySet,d=t(10).MappingList;i.prototype._version=3,i.fromSourceMap=function(e){var n=e.sourceRoot,t=new i({file:e.file,sourceRoot:n});return e.eachMapping(function(e){var i={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(i.source=e.source,null!=n&&(i.source=o.relative(n,i.source)),i.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(i.name=e.name)),t.addMapping(i)}),e.sources.forEach(function(i){var r=i;null!==n&&(r=o.relative(n,i)),t._sources.has(r)||t._sources.add(r);var a=e.sourceContentFor(i);null!=a&&t.setSourceContent(i,a)}),t},i.prototype.addMapping=function(e){var n=o.getArg(e,'generated'),t=o.getArg(e,'original',null),i=o.getArg(e,'source',null),r=o.getArg(e,'name',null);this._skipValidation||this._validateMapping(n,t,i,r),null!=i&&(i=i+'',!this._sources.has(i)&&this._sources.add(i)),null!=r&&(r=r+'',!this._names.has(r)&&this._names.add(r)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:null!=t&&t.line,originalColumn:null!=t&&t.column,source:i,name:r})},i.prototype.setSourceContent=function(e,n){var t=e;null!=this._sourceRoot&&(t=o.relative(this._sourceRoot,t)),null==n?this._sourcesContents&&(delete this._sourcesContents[o.toSetString(t)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null)):(!this._sourcesContents&&(this._sourcesContents=Object.create(null)),this._sourcesContents[o.toSetString(t)]=n)},i.prototype.applySourceMap=function(e,n,t){var i=n;if(null==n){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');i=e.file}var r=this._sourceRoot;null!=r&&(i=o.relative(r,i));var d=new a,u=new a;this._mappings.unsortedForEach(function(n){if(n.source===i&&null!=n.originalLine){var a=e.originalPositionFor({line:n.originalLine,column:n.originalColumn});null!=a.source&&(n.source=a.source,null!=t&&(n.source=o.join(t,n.source)),null!=r&&(n.source=o.relative(r,n.source)),n.originalLine=a.line,n.originalColumn=a.column,null!=a.name&&(n.name=a.name))}var s=n.source;null==s||d.has(s)||d.add(s);var m=n.name;null==m||u.has(m)||u.add(m)},this),this._sources=d,this._names=u,e.sources.forEach(function(n){var i=e.sourceContentFor(n);null!=i&&(null!=t&&(n=o.join(t,n)),null!=r&&(n=o.relative(r,n)),this.setSourceContent(n,i))},this)},i.prototype._validateMapping=function(e,n,t,i){if(n&&'number'!=typeof n.line&&'number'!=typeof n.column)throw new Error('original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.');if(!(e&&'line'in e&&'column'in e&&0<e.line&&0<=e.column&&!n&&!t&&!i)&&!(e&&'line'in e&&'column'in e&&n&&'line'in n&&'column'in n&&0<e.line&&0<=e.column&&0<n.line&&0<=n.column&&t))throw new Error('Invalid mapping: '+JSON.stringify({generated:e,source:t,original:n,name:i}))},i.prototype._serializeMappings=function(){for(var e,n,t,a,d=0,u=1,s=0,m=0,l=0,p=0,c='',g=this._mappings.toArray(),f=0,i=g.length;f<i;f++){if(n=g[f],e='',n.generatedLine!==u)for(d=0;n.generatedLine!==u;)e+=';',u++;else if(0<f){if(!o.compareByGeneratedPositionsInflated(n,g[f-1]))continue;e+=','}e+=r.encode(n.generatedColumn-d),d=n.generatedColumn,null!=n.source&&(a=this._sources.indexOf(n.source),e+=r.encode(a-p),p=a,e+=r.encode(n.originalLine-1-m),m=n.originalLine-1,e+=r.encode(n.originalColumn-s),s=n.originalColumn,null!=n.name&&(t=this._names.indexOf(n.name),e+=r.encode(t-l),l=t)),c+=e}return c},i.prototype._generateSourcesContent=function(e,n){return e.map(function(e){if(!this._sourcesContents)return null;null!=n&&(e=o.relative(n,e));var t=o.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,t)?this._sourcesContents[t]:null},this)},i.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},i.prototype.toString=function(){return JSON.stringify(this.toJSON())},n.SourceMapGenerator=i},function(e,n,t){function i(e){return 0>e?(-e<<1)+1:(e<<1)+0}function r(e){var n=e>>1;return 1==(1&e)?-n:n}var o=t(9),a=5,d=1<<a,u=d-1,s=d;n.encode=function(e){var n,t='',r=i(e);do n=r&u,r>>>=a,0<r&&(n|=s),t+=o.encode(n);while(0<r);return t},n.decode=function(e,n,t){var i,d,m=e.length,l=0,p=0;do{if(n>=m)throw new Error('Expected more digits in base 64 VLQ value.');if(d=o.decode(e.charCodeAt(n++)),-1===d)throw new Error('Invalid base64 digit: '+e.charAt(n-1));i=!!(d&s),d&=u,l+=d<<p,p+=a}while(i);t.value=r(l),t.rest=n}},function(e,n,t){function r(){this._array=[],this._set=a?new Map:Object.create(null)}var i=t(0),o=Object.prototype.hasOwnProperty,a='undefined'!=typeof Map;r.fromArray=function(e,n){for(var t=new r,o=0,i=e.length;o<i;o++)t.add(e[o],n);return t},r.prototype.size=function(){return a?this._set.size:Object.getOwnPropertyNames(this._set).length},r.prototype.add=function(e,n){var t=a?e:i.toSetString(e),r=a?this.has(e):o.call(this._set,t),d=this._array.length;(!r||n)&&this._array.push(e),r||(a?this._set.set(e,d):this._set[t]=d)},r.prototype.has=function(e){if(a)return this._set.has(e);var n=i.toSetString(e);return o.call(this._set,n)},r.prototype.indexOf=function(e){if(a){var n=this._set.get(e);if(0<=n)return n}else{var t=i.toSetString(e);if(o.call(this._set,t))return this._set[t]}throw new Error('"'+e+'" is not in the set.')},r.prototype.at=function(e){if(0<=e&&e<this._array.length)return this._array[e];throw new Error('No element indexed by '+e)},r.prototype.toArray=function(){return this._array.slice()},n.ArraySet=r},function(e,n,t){e.exports=t(5)},function(e,n,t){'use strict';n.__esModule=!0;try{t(6)}catch(e){}class i{static authenticate(e,n,t={db:'dummy',name:'"unknown"',roles:[]},i={admins:{names:[],roles:[]},members:{names:[],roles:[]}},r,o,a,d=!1){if(!e.hasOwnProperty(a))return!0;const u={properties:{},read:['_admin','readonlyadmin'],write:['_admin']};e.hasOwnProperty(o)&&e[o].startsWith('_design/')&&u.read.push('readonlymember');let s=`Current user doesn't own any role`;const m=d?'read':'write';if(t){if('name'in t||(t.name='"unknown"'),r&&a&&e.hasOwnProperty(a)&&r.hasOwnProperty(e[a]))for(const n in u)u.hasOwnProperty(n)&&e.hasOwnProperty(a)&&(u[n]=Array.isArray(u[n])?u[n].concat(r[e[a]][n]):r[e[a]][n]);if(t.roles.length){const e=u[m];for(const n of t.roles)if(e.includes(n))return!0;s=`Current user "${t.name}" `+`owns the following roles: "`+`${t.roles.join('", "')}".`}else s=`Current user "${t.name}" `+`doesn't own any role`}throw{unauthorized:'Only users with a least on of these roles are allowed to '+`perform requested ${m} action: "`+`${u[m].join('", "')}". `+`${s}.`}}static validateDocumentUpdate(e,n,t={db:'dummy',name:'admin',roles:['_admin']},i={admins:{names:[],roles:[]},members:{names:[],roles:[]}},r,o,a=null){const d=new Date,u=Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())/1e3,s=o.property.name.special,m=s.id,l=s.revision,p=s.type;let c='',g='';const f=()=>{c=e.hasOwnProperty(m)?e[m]:'',g=e.hasOwnProperty(l)?e[l]:''};if(f(),i.hasOwnProperty(o.property.name.validatedDocumentsCache)&&i[o.property.name.validatedDocumentsCache].has(`${c}-${g}`))return i[o.property.name.validatedDocumentsCache].delete(`${c}-${g}`),e;if(['latest','upsert'].includes(g))if(n&&n.hasOwnProperty(l))g=e[l]=n[l];else if('latest'===g)throw{forbidden:'Revision: No old document available to update.'};else delete e[l];let h=o.updateStrategy;e.hasOwnProperty(s.strategy)&&(h=e[s.strategy],delete e[s.strategy]);let y;if(a)y=a;else if(JSON&&JSON.hasOwnProperty('stringify'))y=(e)=>JSON.stringify(e,null,4);else throw new Error('Needed "serialize" function is not available.');const _=(e,n)=>{if(n){for(const t in e)if(e.hasOwnProperty(t)&&t.startsWith(n))return t;}else{const n=Object.keys(e);if(n.length)return n[0]}return null},C=(e,n)=>{if(e.hasOwnProperty(s.attachment)){const t=_(e[s.attachment],n);if(t)return e[s.attachment][t].hasOwnProperty('stub')&&e[s.attachment][t].stub||e[s.attachment][t].hasOwnProperty('data')&&![void 0,null].includes(e[s.attachment][t].data)}return!1},S=(e,n,a=[])=>{const g=a.length?` in ${a.join(' -> ')}`:'';let P=[];const b=()=>{if(!e.hasOwnProperty(p))throw{forbidden:'Type: You have to specify a model type '+`via property "${p}"${g}.`};if(!(a.length||new RegExp(o.property.name.typeRegularExpressionPattern.public).test(e[p])))throw{forbidden:'TypeName: You have to specify a model type which matches "'+o.property.name.typeRegularExpressionPattern.public+`" as public type (given "`+`${e[p]}")${g}.`};if(!r.hasOwnProperty(e[p]))throw{forbidden:`Model: Given model "`+`${e[p]}" is not specified`+`${g}.`}};b();let x=e[p];const O=r[x];let A=null;O.hasOwnProperty(s.additional)&&O[s.additional]&&(A=O[s.additional]);const N=(s,m,l,p,c=['constraintExecution','constraintExpression'])=>{for(const f of c)if(l[f]){let c;const h=(f.endsWith('Expression')?'return ':'')+l[f].evaluation,P={attachmentWithPrefixExists:C.bind(e,e),checkDocument:S,checkPropertyContent:w,code:h,getFilenameByPrefix:_,model:O,modelConfiguration:o,modelName:x,models:r,name:m,newDocument:e,newValue:s,now:d,nowUTCTimestamp:u,oldDocument:n,oldValue:p,parentNames:a,pathDescription:g,propertySpecification:l,securitySettings:i,serialize:y,userContext:t};try{c=new Function(...Object.keys(P),h)}catch(e){throw{forbidden:`Compilation: Hook "${f}" has invalid`+` code "${h}": "${y(e)}`+`"${g}.`}}let b=!1;try{b=c(...Object.values(P))}catch(e){throw{forbidden:`Runtime: Hook "${f}" has throw an `+`error with code "${h}": "`+`${y(e)}"${g}.`}}if(!b)throw{forbidden:f.charAt(0).toUpperCase()+f.substring(1)+`: `+(l[f].description?new Function(...Object.keys(P),'return '+l[f].description.trim())(...Object.values(P)):`Property "${m}" should `+`satisfy constraint "${h}" (given "`+`${y(s)}")${g}.`)}}},w=(e,n,t,i=null)=>{let o=[];const d=Array.isArray(t.type)?t.type:[t.type];'object'==typeof e&&Object.getPrototypeOf(e)===Object.prototype&&!e.hasOwnProperty(p)&&1===d.length&&r.hasOwnProperty(d[0])&&(e[p]=d[0]);let u=!1;for(const s of d)if(r.hasOwnProperty(s)){if('object'==typeof e&&Object.getPrototypeOf(e)===Object.prototype&&e.hasOwnProperty(p)&&e[p]===s){const t=S(e,i,a.concat(n));if(t.changedPath.length&&(o=t.changedPath),e=t.newDocument,y(e)===y({}))return{newValue:null,changedPath:o};u=!0;break}else if(1===d.length)throw{forbidden:`NestedType: Under key "${n}" isn't `+`of type "${s}" (given "`+`${y(e)}" of type `+`${typeof e})${g}.`};}else if('DateTime'===s){const t=e;if(null!==e&&'number'!=typeof e&&(e=new Date(e),e=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())/1e3),!('number'!=typeof e||isNaN(e))){u=!0;break}else if(1===d.length)throw{forbidden:`PropertyType: Property "${n}" `+`isn't of (valid) type "DateTime" (`+`given "`+y(t).replace(/^"/,'').replace(/"$/,'')+`" of type "`+`${typeof t}")`+`${g}.`}}else if(['boolean','integer','number','string'].includes(s)){if(!('number'==typeof e&&isNaN(e)||'integer'!==s&&typeof e!==s||'integer'===s&&parseInt(e)!==e)){u=!0;break}else if(1===d.length)throw{forbidden:`PropertyType: Property "${n}"`+` isn't of (valid) type "${s}" (`+`given "${y(e)}" of `+`type "${typeof e}")`+`${g}.`};}else if('string'==typeof s&&s.startsWith('foreignKey:')){const t=r[s.substring(11)][m].type;if(t===typeof e){u=!0;break}else if(1===d.length)throw{forbidden:`PropertyType: Foreign key property "`+`${n}" isn't of type "`+`${t}" (given "`+`${y(e)}" of type "`+`${typeof e}")${g}.`}}else if('any'===s||y(e)===y(s)){u=!0;break}else if(1===d.length)throw{forbidden:`PropertyType: Property "${n}" isn't `+`value "${s}" (given "`+y(e).replace(/^"/,'').replace(/"$/,'')+`" of type "${typeof e}")`+`${g}.`};if(!u)throw{forbidden:'PropertyType: None of the specified types "'+`${d.join('", "')}" for property "${n}" `+`matches value "`+y(e).replace(/^"/,'').replace(/"$/,'')+`${e}" of type "${typeof e}")`+`${g}.`};if('string'==typeof e){if(![void 0,null].includes(t.minimumLength)&&e.length<t.minimumLength)throw{forbidden:`MinimalLength: Property "${n}" must have`+' minimal length '+`${t.minimumLength} (`+`given ${e} with length `+`${e.length})${g}.`};if(![void 0,null].includes(t.maximumLength)&&e.length>t.maximumLength)throw{forbidden:`MaximalLength: Property "${n}" must have`+' maximal length '+`${t.maximumLength} (`+`given ${e} with length `+`${e.length})${g}.`}}if('number'==typeof e){if(![void 0,null].includes(t.minimum)&&e<t.minimum)throw{forbidden:`Minimum: Property "${n}" (type `+`${t.type}) must `+'satisfy a minimum of '+`${t.minimum} (`+`given ${e} with length `+`${e.length})${g}.`};if(![void 0,null].includes(t.maximum)&&e>t.maximum)throw{forbidden:`Maximum: Property "${n}" (type `+`${t.type}) must `+'satisfy a maximum of '+`${t.maximum} (`+`given ${e} with length `+`${e.length}${g}.`}}if(t.selection&&!t.selection.includes(e))throw{forbidden:`Selection: Property "${n}" (type `+`${t.type}) should be one of`+' "'+t.selection.join('", "')+`". But is "${e}"${g}.`};if(!([void 0,null].includes(t.regularExpressionPattern)||new RegExp(t.regularExpressionPattern).test(e)))throw{forbidden:`PatternMatch: Property "${n}" should match `+'regular expression pattern '+t.regularExpressionPattern+` (given "${e}")${g}.`};else if(![void 0,null].includes(t.invertedRegularExpressionPattern)&&new RegExp(t.invertedRegularExpressionPattern).test(e))throw{forbidden:`InvertedPatternMatch: Property "${n}" should`+' not match regular expression pattern '+t.invertedRegularExpressionPattern+` (given "${e}")${g}.`};return N(e,n,t,i),y(e)!==y(i)&&(o=a.concat(n,'value updated')),{newValue:e,changedPath:o}},v=(e,n,a,s)=>{if(!a)for(const m of['onCreateExecution','onCreateExpression'])if(e[m]){let l;const p={attachmentWithPrefixExists:C.bind(n,n),checkDocument:S,checkPropertyContent:w,getFilenameByPrefix:_,model:O,modelConfiguration:o,modelName:x,models:r,name:s,newDocument:n,now:d,nowUTCTimestamp:u,oldDocument:a,propertySpecification:e,securitySettings:i,serialize:y,userContext:t};try{l=new Function(...Object.keys(p),(m.endsWith('Expression')?'return ':'')+e[m].trim())}catch(n){throw{forbidden:`Compilation: Hook "${m}" has `+'invalid code "'+`${e[m]}" for`+` property "${s}": `+y(n)+`${g}.`}}let c;try{c=l(...Object.values(p))}catch(n){throw{forbidden:`Runtime: Hook "${m}" has throw `+'an error with code "'+`${e[m]}" `+`for property "${s}": `+y(n)+`${g}.`}}[void 0,null].includes(c)||(n[s]=c)}},L=(e,n,a,s)=>{if(n.hasOwnProperty(s)){e.trim&&'string'==typeof n[s]&&(n[s]=n[s].trim()),e.emptyEqualsToNull&&(''===n[s]||Array.isArray(n[s])&&0===n[s].length||'object'==typeof n[s]&&null!==n[s]&&0===Object.keys(n).length)&&(n[s]=null);for(const m of['onUpdateExecution','onUpdateExpression'])if(e[m]){let l;const p={attachmentWithPrefixExists:C.bind(n,n),checkDocument:S,checkPropertyContent:w,getFilenameByPrefix:_,model:O,modelConfiguration:o,modelName:x,models:r,name:s,newDocument:n,now:d,nowUTCTimestamp:u,oldDocument:a,propertySpecification:e,securitySettings:i,serialize:y,userContext:t};try{l=new Function(...Object.keys(p),(m.endsWith('Expression')?'return ':'')+e[m].trim())}catch(n){throw{forbidden:`Compilation: Hook "${m}" has invalid`+` code "${e[m]}" `+`for property "${s}": `+`${y(n)}${g}.`}}try{n[s]=l(...Object.values(p))}catch(n){throw{forbidden:`Runtime: Hook "${m}" has throw an `+'error with code "'+`${e[m]}" for `+`property "${s}": ${y(n)}`+`${g}.`}}}}},M=Object.keys(O).filter((e)=>![s.additional,s.allowedRole,s.constraint.execution,s.constraint.expression,s.create.execution,s.create.expression,s.extend,s.maximumAggregatedSize,s.minimumAggregatedSize,s.update.execution,s.update.expression].includes(e));if(!n)for(const s of[o.property.name.special.create.execution,o.property.name.special.create.expression])if(O.hasOwnProperty(s)&&O[s]){let m;const l={attachmentWithPrefixExists:C.bind(e,e),checkDocument:S,checkPropertyContent:w,getFilenameByPrefix:_,model:O,modelConfiguration:o,modelName:x,models:r,id:c,newDocument:e,now:d,nowUTCTimestamp:u,oldDocument:n,securitySettings:i,serialize:y,userContext:t};try{m=new Function(...Object.keys(l),(s.endsWith('Expression')?'return ':'')+O[s].trim())}catch(e){throw{forbidden:`Compilation: Hook "${s}" has invalid`+` code "${O[s]}" for document "`+`${x}": ${y(e)}`+`${g}.`}}let h;try{h=m(...Object.values(l))}catch(e){throw{forbidden:`Runtime: Hook "${s}" has throw an `+'error with code "'+`${O[s]}" for document "`+`${x}": ${y(e)}`+`${g}.`}}[void 0,null].includes(h)||(e=h),b(),x=e[p],0===a.length&&f()}for(const s of[o.property.name.special.update.execution,o.property.name.special.update.expression])if(O.hasOwnProperty(s)&&O[s]){let m;const l={attachmentWithPrefixExists:C.bind(e,e),checkDocument:S,checkPropertyContent:w,getFilenameByPrefix:_,model:O,modelConfiguration:o,modelName:x,models:r,id:c,newDocument:e,now:d,nowUTCTimestamp:u,oldDocument:n,securitySettings:i,serialize:y,userContext:t};try{m=new Function(...Object.keys(l),(s.endsWith('Expression')?'return ':'')+O[s].trim())}catch(e){throw{forbidden:`Compilation: Hook "${s}" has invalid `+` code "${O[s]}" for document "`+`${x}": ${y(e)}`+`${g}.`}}let h;try{h=m(...Object.values(l))}catch(e){throw{forbidden:`Runtime: Hook "${s}" has throw an error `+`with code "${O[s]}" for document "`+`${x}": ${y(e)}`+`${g}.`}}[void 0,null].includes(h)||(e=h),b(),x=e[p],0===a.length&&f()}for(const t of M.concat(A?Object.keys(e).filter((e)=>!M.includes(e)):[]))if(s.attachment===t){for(const i in O[t])if(O[t].hasOwnProperty(i)){e.hasOwnProperty(t)&&null!==e[t]||(e[t]={}),n&&!n.hasOwnProperty(t)&&(n[t]={});const r=Object.keys(e[t]).filter((n)=>null!==e[t][n].data&&new RegExp(i).test(n));let o=[];n&&(o=Object.keys(n[t]).filter((r)=>!(e.hasOwnProperty(t)&&e[t].hasOwnProperty(r)&&e[t][r].hasOwnProperty('data')&&null===e[t][r].data)&&n[t][r]&&null!==n[t][r].data&&new RegExp(i).test(r)));for(const o of r)v(O[t][i],e[t],n&&n[t]?n[t]:null,o);for(const o of r)L(O[t][i],e[t],n&&n[t]?n[t]:null,o);if([void 0,null].includes(O[t][i].default)){if(!(O[t][i].nullable||0<r.length||0<o.length))throw{forbidden:'AttachmentMissing: Missing '+`attachment for type "${i}"`+`${g}.`};if('fillUp'===h&&0===r.length&&0<o.length)for(const i of o)null===e[t][i]?P=a.concat(t,i,'file removed'):e[t][i]=n[t][i]}else if(0===r.length)if(0===o.length)for(const n in O[t][i].default)O[t][i].default.hasOwnProperty(n)&&(e[t][n]=O[t][i].default[n],P=a.concat(t,i,'add default file'));else if('fillUp'===h)for(const i of o)e[t][i]=n[t][i]}}else{const i=M.includes(t)?O[t]:A;if(v(i,e,n,t),L(i,e,n,t),[void 0,null].includes(i.default)){if(!(i.nullable||e.hasOwnProperty(t)||n&&n.hasOwnProperty(t)&&h))throw{forbidden:'MissingProperty: Missing property "'+`${t}"${g}.`};!e.hasOwnProperty(t)&&n&&n.hasOwnProperty(t)&&('fillUp'===h?e[t]=n[t]:!h&&(P=a.concat(t,'property removed')))}else e.hasOwnProperty(t)&&null!==e[t]||(n&&n.hasOwnProperty(t)?'fillUp'===h?e[t]=n[t]:'migrate'===h&&(e[t]=i.default,P=a.concat(t,'migrate default value')):(e[t]=i.default,P=P.concat(t,'add default value')))}if(n&&'incremental'===h)for(const t in e)if(e.hasOwnProperty(t)&&n.hasOwnProperty(t)&&!o.property.name.reserved.concat(m,l,s.conflict,s.deleted,s.deletedConflict,s.localSequence,s.revisions,s.revisionsInformation,p).includes(t)&&(n[t]===e[t]||y(n[t])===y(e[t]))){delete e[t];continue}for(const t in e)if(e.hasOwnProperty(t)&&!o.property.name.reserved.concat(l,s.conflict,s.deleted,s.deletedConflict,s.localSequence,s.revisions,s.revisionsInformation,s.strategy).includes(t)){let i;if(O.hasOwnProperty(t))i=O[t];else if(A)i=A;else if('migrate'===h){delete e[t],P=a.concat(t,'migrate removed property');continue}else throw{forbidden:'Property: Given property "'+`${t}" isn't specified in `+`model "${x}"${g}.`};if(!i)continue;const d=(e,n,t,i)=>{if(!e.writable)if(t){if(t.hasOwnProperty(i)&&y(n[i])===y(t[i]))return i!==m&&'incremental'===h&&delete n[i],!0;throw{forbidden:'Readonly: Property "'+`${i}" is not writable (old `+`document "`+`${y(t)}")`+`${g}.`}}else throw{forbidden:`Readonly: Property "${i}"`+` is not writable${g}.`};if(!e.mutable&&t&&t.hasOwnProperty(i)){if(y(n[i])===y(t[i]))return'incremental'!==h||o.property.name.reserved.concat(s.deleted,m,l).includes(i)||delete n[i],!0;throw{forbidden:`Immutable: Property "${i}`+'" is not writable (old document "'+`${y(t)}")`+`${g}.`}}if(null===n[i]){if(e.nullable)return delete n[i],t&&t.hasOwnProperty(i)&&(P=a.concat(i,'delete property')),!0;throw{forbidden:`NotNull: Property "${i}" `+'should not by "null"'+`${g}.`}}return!1};if(s.attachment===t){for(const i in e[t])if(e[t].hasOwnProperty(i))for(const r in O[t])if(O[t].hasOwnProperty(r)&&new RegExp(r).test(i)){d(O[t][r],e,n,i);break}continue}else if(d(i,e,n,t))continue;if('string'==typeof i.type&&i.type.endsWith('[]')||Array.isArray(i.type)&&i.type.length&&Array.isArray(i.type[0])){if(!Array.isArray(e[t]))throw{forbidden:`PropertyType: Property "${t}" isn't `+`of type "array -> `+`${i.type}" (given "`+`${y(e[t])}")`+`${g}.`};else if(![void 0,null].includes(i.minimumNumber)&&e[t].length<i.minimumNumber)throw{forbidden:`MinimumArrayLength: Property "${t}" `+` (array of length `+`${e[t].length}) doesn't `+`fullfill minimum array length of `+i.minimumNumber+`${g}.`};else if(![void 0,null].includes(i.maximumNumber)&&i.maximumNumber<e[t].length)throw{forbidden:`MaximumArrayLength: Property "${t}" `+`(array of length `+`${e[t].length}) doesn't `+`fullfill maximum array length of `+i.maximumNumber+`${g}.`};N(e[t],t,i,n&&n.hasOwnProperty(t)&&n[t]||void 0,['arrayConstraintExecution','arrayConstraintExpression']);const o={};for(const e in i)i.hasOwnProperty(e)&&(o[e]='type'===e?Array.isArray(i[e])?i[e][0]:[i[e].substring(0,i.type.length-2)]:i[e]);if(1===typeof o.type.length&&r.hasOwnProperty(o.type[0]))for(const n of e[t].slice())'object'!=typeof n||Object.getPrototypeOf(n)!==Object.prototype||n.hasOwnProperty(p)||(n[p]=o.type[0]);let d=0;for(const n of e[t].slice())e[t][d]=w(n,`${d+1}. value in ${t}`,o).newValue,null===n&&e[t].splice(d,1),d+=1;n&&n.hasOwnProperty(t)&&Array.isArray(n[t])&&n[t].length===e[t].length&&y(n[t])===y(e[t])||(P=a.concat(t,'array updated'))}else{const r=n&&n.hasOwnProperty(t)?n[t]:null,o=w(e[t],t,i,r);e[t]=o.newValue,o.changedPath.length&&(P=o.changedPath),null===e[t]&&(null!==r&&(P=a.concat(t,'property removed')),delete e[t])}}for(let m in s.constraint)if(s.constraint.hasOwnProperty(m)&&(m=s.constraint[m])&&O.hasOwnProperty(m)&&Array.isArray(O[m])&&O[m].length)for(const l of O[m]){let p;const c=(m===s.constraint.expression?'return ':'')+l.evaluation.trim(),f={attachmentWithPrefixExists:C.bind(e,e),checkDocument:S,checkPropertyContent:w,code:c,getFilenameByPrefix:_,model:O,modelConfiguration:o,modelName:x,models:r,newDocument:e,now:d,nowUTCTimestamp:u,oldDocument:n,parentNames:a,pathDescription:g,securitySettings:i,serialize:y,userContext:t};try{p=new Function(...Object.keys(f),c)}catch(e){throw{forbidden:`Compilation: Hook "${m}" has `+`invalid code "${c}": "`+y(e)+`"${g}.`}}let h=!1;try{h=p(...Object.values(f))}catch(e){throw{forbidden:`Runtime: Hook "${m}" has `+`thrown an error with code "${c}": `+`${y(e)}${g}.`}}if(!h){const n=m.replace(/^[^a-zA-Z]+/,'');throw{forbidden:n.charAt(0).toUpperCase()+`${n.substring(1)}: `+(l.description?new Function(...Object.keys(f),'return '+l.description.trim())(...Object.values(f)):`Model "${x}" should satisfy `+`constraint "${c}" (given "`+`${y(e)}")`+`${g}.`)}}}if(e.hasOwnProperty(s.attachment)){const t=e[s.attachment];if('object'!=typeof t||Object.getPrototypeOf(t)!==Object.prototype)throw{forbidden:'AttachmentType: given attachment has '+`invalid type${g}.`};let i=null;if(n&&n.hasOwnProperty(s.attachment)&&(i=n[s.attachment],null!==i&&'object'==typeof i))for(const e in i)i.hasOwnProperty(e)&&(t.hasOwnProperty(e)?null===t[e]||null===t[e].data||t[e].content_type===i[e].content_type&&t[e].data===i[e].data?((null===t[e]||null===t[e].data)&&(P=a.concat(s.attachment,e,'attachment removed')),'incremental'===h&&delete t[e]):P=a.concat(s.attachment,e,'attachment updated'):'fillUp'===h?t[e]=i[e]:h||(P=a.concat(s.attachment,e,'attachment removed')));for(const e in t)t.hasOwnProperty(e)&&([void 0,null].includes(t[e])||null===t[e].data?delete t[e]:i&&i.hasOwnProperty(e)&&t[e].content_type===i[e].content_type&&t[e].data===i[e].data||(P=a.concat(s.attachment,e,'attachment updated')));0===Object.keys(t).length&&delete e[s.attachment];const r={};for(const e in O[s.attachment])O[s.attachment].hasOwnProperty(e)&&(r[e]=[]);for(const e in t)if(t.hasOwnProperty(e)){let n=!1;for(const t in O[s.attachment])if(new RegExp(t).test(e)){r[t].push(e),n=!0;break}if(!n)throw{forbidden:'AttachmentTypeMatch: None of the specified attachment types ("'+Object.keys(O[s.attachment]).join('", "')+'") matches given one '+`("${e}")${g}.`}}let o=0;for(const e in r){if(!r.hasOwnProperty(e))continue;const n=r[e].length;if(null!==O[s.attachment][e].maximumNumber&&n>O[s.attachment][e].maximumNumber)throw{forbidden:'AttachmentMaximum: given number of '+`attachments (${n}) `+`doesn't satisfy specified maximum of `+O[s.attachment][e].maximumNumber+` from type "${e}"${g}.`};if(!(O[s.attachment][e].nullable&&0===n)&&n<O[s.attachment][e].minimumNumber)throw{forbidden:'AttachmentMinimum: given number of '+`attachments (${n}) `+`doesn't satisfy specified minimum of `+O[s.attachment][e].minimumNumber+` from type "${e}"${g}.`};let i=0;for(const n of r[e]){if(!([null,void 0].includes(O[s.attachment][e].regularExpressionPattern)||new RegExp(O[s.attachment][e].regularExpressionPattern).test(n)))throw{forbidden:'AttachmentName: given attachment name "'+`${n}" doesn't satisfy specified `+'regular expression pattern "'+O[s.attachment][e].regularExpressionPattern+`" from type "${e}"${g}.`};else if(![null,void 0].includes(O[s.attachment][e].invertedRegularExpressionPattern)&&new RegExp(O[s.attachment][e].invertedRegularExpressionPattern).test(n))throw{forbidden:'InvertedAttachmentName: given '+`attachment name "${n}" doesn't `+'satisfy specified regular expression pattern "'+O[s.attachment][e].invertedRegularExpressionPattern+`" from type "${e}"${g}.`};else if(!([null,void 0].includes(O[s.attachment][e].contentTypeRegularExpressionPattern)||t[n].hasOwnProperty('content_type')&&t[n].content_type&&new RegExp(O[s.attachment][e].contentTypeRegularExpressionPattern).test(t[n].content_type)))throw{forbidden:'AttachmentContentType: given attachment content type "'+t[n].content_type+`" doesn't satisfy specified regular`+' expression pattern "'+O[s.attachment][e].contentTypeRegularExpressionPattern+`" from type "${e}"${g}.`};const r=O[s.attachment][e].invertedContentTypeRegularExpressionPattern;if(!([null,void 0].includes(r)||t[n].hasOwnProperty('content_type')&&t[n].content_type&&!new RegExp(r).test(t[n].content_type)))throw{forbidden:'InvertedAttachmentContentType: given attachment content type "'+t[n].content_type+`" doesn't satisfy specified regular`+` expression pattern "${r}" `+`from type "${e}"${g}.`};let o=0;if('length'in t[n]?o=t[n].length:'data'in t[n]&&(Buffer&&'byteLength'in Buffer?o=Buffer.byteLength(t[n].data,'base64'):o=t.data.length),![null,void 0].includes(O[s.attachment][e].minimumSize)&&O[s.attachment][e].minimumSize>o)throw{forbidden:'AttachmentMinimumSize: given attachment'+` size ${o} byte doesn't satisfy `+'specified minimum  of '+O[s.attachment][e].minimumSize+` byte ${g}.`};else if(![null,void 0].includes(O[s.attachment][e].maximumSize)&&O[s.attachment][e].maximumSize<o)throw{forbidden:'AttachmentMaximumSize: given attachment'+` size ${o} byte doesn't satisfy `+'specified maximum of '+O[s.attachment][e].maximumSize+` byte ${g}.`};i+=o}if(![null,void 0].includes(O[s.attachment][e].minimumAggregatedSize)&&O[s.attachment][e].minimumAggregatedSize>i)throw{forbidden:'AttachmentAggregatedMinimumSize: given  aggregated size of attachments from type "'+`${e}" ${i} byte doesn't `+'satisfy specified minimum of '+O[s.attachment][e].minimumAggregatedSize+` byte ${g}.`};else if(![null,void 0].includes(O[s.attachment][e].maximumAggregatedSize)&&O[s.attachment][e].maximumAggregatedSize<i)throw{forbidden:'AttachmentAggregatedMaximumSize: given  aggregated size of attachments from type "'+`${e}" ${i} byte doesn't `+'satisfy specified maximum of '+O[s.attachment][e].maximumAggregatedSize+` byte ${g}.`};o+=i}if(O.hasOwnProperty(s.minimumAggregatedSize)&&![null,void 0].includes(O[s.minimumAggregatedSize])&&O[s.minimumAggregatedSize]>o)throw{forbidden:'AggregatedMinimumSize: given aggregated size '+`${o} byte doesn't satisfy `+'specified minimum of '+O[s.minimumAggregatedSize]+` byte ${g}.`};else if(O.hasOwnProperty(s.maximumAggregatedSize)&&![null,void 0].includes(O[s.maximumAggregatedSize])&&O[s.maximumAggregatedSize]<o)throw{forbidden:'AggregatedMaximumSize: given aggregated size '+`${o} byte doesn't satisfy `+'specified maximum of '+O[s.maximumAggregatedSize]+` byte ${g}.`}}if(n&&n.hasOwnProperty(s.attachment)&&0===Object.keys(n[s.attachment]).length&&delete n[s.attachment],0===P.length&&n&&'migrate'===h)for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(P=a.concat(t,'migrate removed property'));return{changedPath:P,newDocument:e}},P=S(e,n);if(P.newDocument._deleted&&!n||!(P.newDocument._deleted&&n&&P.newDocument._deleted!==n._deleted||P.changedPath.length))throw{forbidden:'NoChange: No new data given. new document: '+`${y(e)}; old document: `+`${y(n)}.`};return i.hasOwnProperty('checkedDocuments')?i[o.property.name.validatedDocumentsCache].add(`${c}-${g}`):i[o.property.name.validatedDocumentsCache]=new Set([`${c}-${g}`]),P.newDocument}}n.DatabaseHelper=i,n.default=i},function(e,n,t){t(7).install()},function(e,n,t){function i(){return!('browser'!==x)||'node'!==x&&'undefined'!=typeof window&&'function'==typeof XMLHttpRequest&&!(window.require&&window.module&&window.process&&'renderer'===window.process.type)}function r(){return'object'==typeof process&&null!==process&&'function'==typeof process.on}function o(e){return function(n){for(var t,r=0;r<e.length;r++)if(t=e[r](n),t)return t;return null}}function a(e,n){if(!e)return n;var t=C.dirname(e),i=/^\w+:\/\/[^\/]*/.exec(t),r=i?i[0]:'',o=t.slice(r.length);return r&&/^\/\w\:/.test(o)?(r+='/',r+C.resolve(t.slice(r.length),n).replace(/\\/g,'/')):r+C.resolve(t.slice(r.length),n)}function d(e){var n;if(i())try{var t=new XMLHttpRequest;t.open('GET',e,!1),t.send(null),n=4===t.readyState?t.responseText:null;var r=t.getResponseHeader('SourceMap')||t.getResponseHeader('X-SourceMap');if(r)return r}catch(n){}n=L(e);for(var o,a,d=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)|(?:\/\*[@#][ \t]+sourceMappingURL=([^\*]+?)[ \t]*(?:\*\/)[ \t]*$)/mg;a=d.exec(n);)o=a;return o?o[1]:null}function u(e){var n=A[e.source];if(!n){var t=M(e.source);t?(n=A[e.source]={url:t.url,map:new _(t.map)},n.map.sourcesContent&&n.map.sources.forEach(function(e,t){var i=n.map.sourcesContent[t];if(i){var r=a(n.url,e);O[r]=i}})):n=A[e.source]={url:null,map:null}}if(n&&n.map){var i=n.map.originalPositionFor(e);if(null!==i.source)return i.source=a(n.url,i.source),i}return e}function s(e){var n=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(e);if(n){var t=u({source:n[2],line:+n[3],column:n[4]-1});return'eval at '+n[1]+' ('+t.source+':'+t.line+':'+(t.column+1)+')'}return n=/^eval at ([^(]+) \((.+)\)$/.exec(e),n?'eval at '+n[1]+' ('+s(n[2])+')':e}function m(){var e,n='';if(this.isNative())n='native';else{e=this.getScriptNameOrSourceURL(),!e&&this.isEval()&&(n=this.getEvalOrigin(),n+=', '),n+=e?e:'<anonymous>';var t=this.getLineNumber();if(null!=t){n+=':'+t;var i=this.getColumnNumber();i&&(n+=':'+i)}}var r='',o=this.getFunctionName(),a=!0,d=this.isConstructor(),u=!(this.isToplevel()||d);if(u){var s=this.getTypeName();'[object Object]'===s&&(s='null');var m=this.getMethodName();o?(s&&0!=o.indexOf(s)&&(r+=s+'.'),r+=o,m&&o.indexOf('.'+m)!=o.length-m.length-1&&(r+=' [as '+m+']')):r+=s+'.'+(m||'<anonymous>')}else d?r+='new '+(o||'<anonymous>'):o?r+=o:(r+=n,a=!1);return a&&(r+=' ('+n+')'),r}function l(e){var n={};return Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(function(t){n[t]=/^(?:is|get)/.test(t)?function(){return e[t].call(e)}:e[t]}),n.toString=m,n}function p(e){if(e.isNative())return e;var n=e.getFileName()||e.getScriptNameOrSourceURL();if(n){var t=e.getLineNumber(),r=e.getColumnNumber()-1,o=62;1!==t||!(r>o)||i()||e.isEval()||(r-=o);var a=u({source:n,line:t,column:r});return e=l(e),e.getFileName=function(){return a.source},e.getLineNumber=function(){return a.line},e.getColumnNumber=function(){return a.column+1},e.getScriptNameOrSourceURL=function(){return a.source},e}var d=e.isEval()&&e.getEvalOrigin();return d?(d=s(d),e=l(e),e.getEvalOrigin=function(){return d},e):e}function c(e,n){return b&&(O={},A={}),e+n.map(function(e){return'\n    at '+p(e)}).join('')}function g(e){var n=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(e.stack);if(n){var t=n[1],i=+n[2],r=+n[3],o=O[t];if(!o&&y&&y.existsSync(t))try{o=y.readFileSync(t,'utf8')}catch(e){o=''}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[i-1];if(a)return t+':'+i+'\n'+a+'\n'+Array(r).join(' ')+'^'}}return null}function f(e){var n=g(e);n&&(console.error(),console.error(n)),console.error(e.stack),process.exit(1)}function h(){var e=process.emit;process.emit=function(n){if('uncaughtException'===n){var t=arguments[1]&&arguments[1].stack,i=0<this.listeners(n).length;if(t&&!i)return f(arguments[1])}return e.apply(this,arguments)}}var y,_=t(8).SourceMapConsumer,C=t(15);try{y=t(16),y.existsSync&&y.readFileSync||(y=null)}catch(e){}var S=!1,P=!1,b=!1,x='auto',O={},A={},N=/^data:application\/json[^,]+base64,/,w=[],v=[],L=o(w);w.push(function(e){if(e=e.trim(),/^file:/.test(e)&&(e=e.replace(/file:\/\/\/(\w:)?/,function(e,n){return n?'':'/'})),e in O)return O[e];var n=null;if(!y){var t=new XMLHttpRequest;t.open('GET',e,!1),t.send(null);var n=null;4===t.readyState&&200===t.status&&(n=t.responseText)}else if(y.existsSync(e))try{n=y.readFileSync(e,'utf8')}catch(e){n=''}return O[e]=n});var M=o(v);v.push(function(e){var n=d(e);if(!n)return null;var t;if(N.test(n)){var i=n.slice(n.indexOf(',')+1);t=new Buffer(i,'base64').toString(),n=e}else n=a(e,n),t=L(n);return t?{url:n,map:t}:null}),n.wrapCallSite=p,n.getErrorSource=g,n.mapSourcePosition=u,n.retrieveSourceMap=M,n.install=function(e){if(e=e||{},e.environment&&(x=e.environment,-1===['node','browser','auto'].indexOf(x)))throw new Error('environment '+x+' was unknown. Available options are {auto, browser, node}');if(e.retrieveFile&&(e.overrideRetrieveFile&&(w.length=0),w.unshift(e.retrieveFile)),e.retrieveSourceMap&&(e.overrideRetrieveSourceMap&&(v.length=0),v.unshift(e.retrieveSourceMap)),e.hookRequire&&!i()){var n;try{n=t(17)}catch(e){}var o=n.prototype._compile;o.__sourceMapSupport||(n.prototype._compile=function(e,n){return O[n]=e,A[n]=void 0,o.call(this,e,n)},n.prototype._compile.__sourceMapSupport=!0)}if(b||(b=!!('emptyCacheBetweenOperations'in e)&&e.emptyCacheBetweenOperations),S||(S=!0,Error.prepareStackTrace=c),!P){var a=!('handleUncaughtExceptions'in e)||e.handleUncaughtExceptions;a&&r()&&(P=!0,h())}}},function(e,n,t){n.SourceMapGenerator=t(1).SourceMapGenerator,n.SourceMapConsumer=t(11).SourceMapConsumer,n.SourceNode=t(14).SourceNode},function(e,n){var t=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'];n.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError('Must be between 0 and 63: '+e)},n.decode=function(e){var n=65,t=97,i=48;return n<=e&&e<=90?e-n:t<=e&&e<=122?e-t+26:i<=e&&e<=57?e-i+52:e==43?62:e==47?63:-1}},function(e,n,t){function i(e,n){var t=e.generatedLine,i=n.generatedLine,r=e.generatedColumn,a=n.generatedColumn;return i>t||i==t&&a>=r||0>=o.compareByGeneratedPositionsInflated(e,n)}function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}var o=t(0);r.prototype.unsortedForEach=function(e,n){this._array.forEach(e,n)},r.prototype.add=function(e){i(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(o.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},n.MappingList=r},function(e,n,t){function i(e,n){var t=e;return'string'==typeof e&&(t=d.parseSourceMapInput(e)),null==t.sections?new r(t,n):new a(t,n)}function r(e,n){var t=e;'string'==typeof e&&(t=d.parseSourceMapInput(e));var i=d.getArg(t,'version'),r=d.getArg(t,'sources'),o=d.getArg(t,'names',[]),a=d.getArg(t,'sourceRoot',null),u=d.getArg(t,'sourcesContent',null),m=d.getArg(t,'mappings'),l=d.getArg(t,'file',null);if(i!=this._version)throw new Error('Unsupported version: '+i);a&&(a=d.normalize(a)),r=r.map(String).map(d.normalize).map(function(e){return a&&d.isAbsolute(a)&&d.isAbsolute(e)?d.relative(a,e):e}),this._names=s.fromArray(o.map(String),!0),this._sources=s.fromArray(r,!0),this._absoluteSources=this._sources.toArray().map(function(e){return d.computeSourceURL(a,e,n)}),this.sourceRoot=a,this.sourcesContent=u,this._mappings=m,this._sourceMapURL=n,this.file=l}function o(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function a(e,n){var t=e;'string'==typeof e&&(t=d.parseSourceMapInput(e));var r=d.getArg(t,'version'),o=d.getArg(t,'sections');if(r!=this._version)throw new Error('Unsupported version: '+r);this._sources=new s,this._names=new s;var a={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw new Error('Support for url field in sections not implemented.');var t=d.getArg(e,'offset'),r=d.getArg(t,'line'),o=d.getArg(t,'column');if(r<a.line||r===a.line&&o<a.column)throw new Error('Section offsets must be ordered and non-overlapping.');return a=t,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new i(d.getArg(e,'map'),n)}})}var d=t(0),u=t(12),s=t(3).ArraySet,m=t(2),l=t(13).quickSort;i.fromSourceMap=function(e,n){return r.fromSourceMap(e,n)},i.prototype._version=3,i.prototype.__generatedMappings=null,Object.defineProperty(i.prototype,'_generatedMappings',{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),i.prototype.__originalMappings=null,Object.defineProperty(i.prototype,'_originalMappings',{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),i.prototype._charIsMappingSeparator=function(e,n){var t=e.charAt(n);return';'===t||','===t},i.prototype._parseMappings=function(){throw new Error('Subclasses must implement _parseMappings')},i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2,i.prototype.eachMapping=function(e,n,t){var r,o=t||i.GENERATED_ORDER;switch(o){case i.GENERATED_ORDER:r=this._generatedMappings;break;case i.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error('Unknown order of iteration.');}var a=this.sourceRoot;r.map(function(e){var n=null===e.source?null:this._sources.at(e.source);return n=d.computeSourceURL(a,n,this._sourceMapURL),{source:n,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,n||null)},i.prototype.allGeneratedPositionsFor=function(e){var n=d.getArg(e,'line'),t={source:d.getArg(e,'source'),originalLine:n,originalColumn:d.getArg(e,'column',0)};if(t.source=this._findSourceIndex(t.source),0>t.source)return[];var i=[],r=this._findMapping(t,this._originalMappings,'originalLine','originalColumn',d.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(0<=r){var o=this._originalMappings[r];if(void 0===e.column)for(var a=o.originalLine;o&&o.originalLine===a;)i.push({line:d.getArg(o,'generatedLine',null),column:d.getArg(o,'generatedColumn',null),lastColumn:d.getArg(o,'lastGeneratedColumn',null)}),o=this._originalMappings[++r];else for(var s=o.originalColumn;o&&o.originalLine===n&&o.originalColumn==s;)i.push({line:d.getArg(o,'generatedLine',null),column:d.getArg(o,'generatedColumn',null),lastColumn:d.getArg(o,'lastGeneratedColumn',null)}),o=this._originalMappings[++r]}return i},n.SourceMapConsumer=i,r.prototype=Object.create(i.prototype),r.prototype.consumer=i,r.prototype._findSourceIndex=function(e){var n=e;if(null!=this.sourceRoot&&(n=d.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},r.fromSourceMap=function(e,n){var t=Object.create(r.prototype),a=t._names=s.fromArray(e._names.toArray(),!0),u=t._sources=s.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t._sourceMapURL=n,t._absoluteSources=t._sources.toArray().map(function(e){return d.computeSourceURL(t.sourceRoot,e,n)});for(var m=e._mappings.toArray().slice(),p=t.__generatedMappings=[],c=t.__originalMappings=[],g=0,i=m.length;g<i;g++){var f=m[g],h=new o;h.generatedLine=f.generatedLine,h.generatedColumn=f.generatedColumn,f.source&&(h.source=u.indexOf(f.source),h.originalLine=f.originalLine,h.originalColumn=f.originalColumn,f.name&&(h.name=a.indexOf(f.name)),c.push(h)),p.push(h)}return l(t.__originalMappings,d.compareByOriginalPositions),t},r.prototype._version=3,Object.defineProperty(r.prototype,'sources',{get:function(){return this._absoluteSources.slice()}}),r.prototype._parseMappings=function(e){for(var n,t,i,r,a,u=1,s=0,p=0,c=0,g=0,f=0,h=e.length,y=0,_={},C={},S=[],P=[];y<h;)if(';'===e.charAt(y))u++,y++,s=0;else if(','===e.charAt(y))y++;else{for(n=new o,n.generatedLine=u,r=y;r<h&&!this._charIsMappingSeparator(e,r);r++);if(t=e.slice(y,r),i=_[t],i)y+=t.length;else{for(i=[];y<r;)m.decode(e,y,C),a=C.value,y=C.rest,i.push(a);if(2===i.length)throw new Error('Found a source, but no line and column');if(3===i.length)throw new Error('Found a source and line, but no column');_[t]=i}n.generatedColumn=s+i[0],s=n.generatedColumn,1<i.length&&(n.source=g+i[1],g+=i[1],n.originalLine=p+i[2],p=n.originalLine,n.originalLine+=1,n.originalColumn=c+i[3],c=n.originalColumn,4<i.length&&(n.name=f+i[4],f+=i[4])),P.push(n),'number'==typeof n.originalLine&&S.push(n)}l(P,d.compareByGeneratedPositionsDeflated),this.__generatedMappings=P,l(S,d.compareByOriginalPositions),this.__originalMappings=S},r.prototype._findMapping=function(e,n,t,i,r,o){if(0>=e[t])throw new TypeError('Line must be greater than or equal to 1, got '+e[t]);if(0>e[i])throw new TypeError('Column must be greater than or equal to 0, got '+e[i]);return u.search(e,n,r,o)},r.prototype.computeColumnSpans=function(){for(var e,n=0;n<this._generatedMappings.length;++n){if(e=this._generatedMappings[n],n+1<this._generatedMappings.length){var t=this._generatedMappings[n+1];if(e.generatedLine===t.generatedLine){e.lastGeneratedColumn=t.generatedColumn-1;continue}}e.lastGeneratedColumn=Infinity}},r.prototype.originalPositionFor=function(e){var n={generatedLine:d.getArg(e,'line'),generatedColumn:d.getArg(e,'column')},t=this._findMapping(n,this._generatedMappings,'generatedLine','generatedColumn',d.compareByGeneratedPositionsDeflated,d.getArg(e,'bias',i.GREATEST_LOWER_BOUND));if(0<=t){var r=this._generatedMappings[t];if(r.generatedLine===n.generatedLine){var o=d.getArg(r,'source',null);null!==o&&(o=this._sources.at(o),o=d.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=d.getArg(r,'name',null);return null!==a&&(a=this._names.at(a)),{source:o,line:d.getArg(r,'originalLine',null),column:d.getArg(r,'originalColumn',null),name:a}}}return{source:null,line:null,column:null,name:null}},r.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})},r.prototype.sourceContentFor=function(e,n){if(!this.sourcesContent)return null;var t=this._findSourceIndex(e);if(0<=t)return this.sourcesContent[t];var i=e;null!=this.sourceRoot&&(i=d.relative(this.sourceRoot,i));var r;if(null!=this.sourceRoot&&(r=d.urlParse(this.sourceRoot))){var o=i.replace(/^file:\/\//,'');if('file'==r.scheme&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!r.path||'/'==r.path)&&this._sources.has('/'+i))return this.sourcesContent[this._sources.indexOf('/'+i)]}if(n)return null;throw new Error('"'+i+'" is not in the SourceMap.')},r.prototype.generatedPositionFor=function(e){var n=d.getArg(e,'source');if(n=this._findSourceIndex(n),0>n)return{line:null,column:null,lastColumn:null};var t={source:n,originalLine:d.getArg(e,'line'),originalColumn:d.getArg(e,'column')},r=this._findMapping(t,this._originalMappings,'originalLine','originalColumn',d.compareByOriginalPositions,d.getArg(e,'bias',i.GREATEST_LOWER_BOUND));if(0<=r){var o=this._originalMappings[r];if(o.source===t.source)return{line:d.getArg(o,'generatedLine',null),column:d.getArg(o,'generatedColumn',null),lastColumn:d.getArg(o,'lastGeneratedColumn',null)}}return{line:null,column:null,lastColumn:null}},n.BasicSourceMapConsumer=r,a.prototype=Object.create(i.prototype),a.prototype.constructor=i,a.prototype._version=3,Object.defineProperty(a.prototype,'sources',{get:function(){for(var e=[],n=0;n<this._sections.length;n++)for(var t=0;t<this._sections[n].consumer.sources.length;t++)e.push(this._sections[n].consumer.sources[t]);return e}}),a.prototype.originalPositionFor=function(e){var n={generatedLine:d.getArg(e,'line'),generatedColumn:d.getArg(e,'column')},t=u.search(n,this._sections,function(e,n){var t=e.generatedLine-n.generatedOffset.generatedLine;return t?t:e.generatedColumn-n.generatedOffset.generatedColumn}),i=this._sections[t];return i?i.consumer.originalPositionFor({line:n.generatedLine-(i.generatedOffset.generatedLine-1),column:n.generatedColumn-(i.generatedOffset.generatedLine===n.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},a.prototype.sourceContentFor=function(e,n){for(var t=0;t<this._sections.length;t++){var i=this._sections[t],r=i.consumer.sourceContentFor(e,!0);if(r)return r}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){for(var n,t=0;t<this._sections.length;t++)if(n=this._sections[t],-1!==n.consumer._findSourceIndex(d.getArg(e,'source'))){var i=n.consumer.generatedPositionFor(e);if(i){var r={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return r}}return{line:null,column:null}},a.prototype._parseMappings=function(){this.__generatedMappings=[],this.__originalMappings=[];for(var e=0;e<this._sections.length;e++)for(var n=this._sections[e],t=n.consumer._generatedMappings,i=0;i<t.length;i++){var r=t[i],o=n.consumer._sources.at(r.source);o=d.computeSourceURL(n.consumer.sourceRoot,o,this._sourceMapURL),this._sources.add(o),o=this._sources.indexOf(o);var a=null;r.name&&(a=n.consumer._names.at(r.name),this._names.add(a),a=this._names.indexOf(a));var u={source:o,generatedLine:r.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:r.generatedColumn+(n.generatedOffset.generatedLine===r.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:r.originalLine,originalColumn:r.originalColumn,name:a};this.__generatedMappings.push(u),'number'==typeof u.originalLine&&this.__originalMappings.push(u)}l(this.__generatedMappings,d.compareByGeneratedPositionsDeflated),l(this.__originalMappings,d.compareByOriginalPositions)},n.IndexedSourceMapConsumer=a},function(e,n){function t(e,i,r,o,a,d){var u=Math.floor((i-e)/2)+e,s=a(r,o[u],!0);return 0===s?u:0<s?1<i-u?t(u,i,r,o,a,d):d==n.LEAST_UPPER_BOUND?i<o.length?i:-1:u:1<u-e?t(e,u,r,o,a,d):d==n.LEAST_UPPER_BOUND?u:0>e?-1:e}n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.search=function(e,i,r,o){if(0===i.length)return-1;var a=t(-1,i.length,e,i,r,o||n.GREATEST_LOWER_BOUND);if(0>a)return-1;for(;0<=a-1&&!(0!==r(i[a],i[a-1],!0));)--a;return a}},function(e,n){function t(e,n,t){var i=e[n];e[n]=e[t],e[t]=i}function o(e,n){return Math.round(e+Math.random()*(n-e))}function a(e,n,d,u){if(d<u){var r=o(d,u),s=d-1;t(e,r,u);for(var i=e[u],m=d;m<u;m++)0>=n(e[m],i)&&(s+=1,t(e,s,m));t(e,s+1,m);var l=s+1;a(e,n,d,l-1),a(e,n,l+1,u)}}n.quickSort=function(e,n){a(e,n,0,e.length-1)}},function(e,n,t){function i(e,n,t,i,r){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==n?null:n,this.source=null==t?null:t,this.name=null==r?null:r,this[d]=!0,null!=i&&this.add(i)}var r=t(1).SourceMapGenerator,o=t(0),a=/(\r?\n)/,d='$$$isSourceNode$$$';i.fromStringWithSourceMap=function(e,n,t){function r(e,n){if(null===e||void 0===e.source)d.add(n);else{var r=t?o.join(t,e.source):e.source;d.add(new i(e.originalLine,e.originalColumn,r,n,e.name))}}var d=new i,u=e.split(a),s=0,m=function(){function e(){return s<u.length?u[s++]:void 0}var n=e(),t=e()||'';return n+t},l=1,p=0,c=null;return n.eachMapping(function(e){if(null!==c)if(l<e.generatedLine)r(c,m()),l++,p=0;else{var n=u[s]||'',t=n.substr(0,e.generatedColumn-p);return u[s]=n.substr(e.generatedColumn-p),p=e.generatedColumn,r(c,t),void(c=e)}for(;l<e.generatedLine;)d.add(m()),l++;if(p<e.generatedColumn){var n=u[s]||'';d.add(n.substr(0,e.generatedColumn)),u[s]=n.substr(e.generatedColumn),p=e.generatedColumn}c=e},this),s<u.length&&(c&&r(c,m()),d.add(u.splice(s).join(''))),n.sources.forEach(function(e){var i=n.sourceContentFor(e);null!=i&&(null!=t&&(e=o.join(t,e)),d.setSourceContent(e,i))}),d},i.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else if(e[d]||'string'==typeof e)e&&this.children.push(e);else throw new TypeError('Expected a SourceNode, string, or an array of SourceNodes and strings. Got '+e);return this},i.prototype.prepend=function(e){if(Array.isArray(e))for(var n=e.length-1;0<=n;n--)this.prepend(e[n]);else if(e[d]||'string'==typeof e)this.children.unshift(e);else throw new TypeError('Expected a SourceNode, string, or an array of SourceNodes and strings. Got '+e);return this},i.prototype.walk=function(e){for(var n,t=0,i=this.children.length;t<i;t++)n=this.children[t],n[d]?n.walk(e):''!==n&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(e){var n,t,i=this.children.length;if(0<i){for(n=[],t=0;t<i-1;t++)n.push(this.children[t]),n.push(e);n.push(this.children[t]),this.children=n}return this},i.prototype.replaceRight=function(e,n){var t=this.children[this.children.length-1];return t[d]?t.replaceRight(e,n):'string'==typeof t?this.children[this.children.length-1]=t.replace(e,n):this.children.push(''.replace(e,n)),this},i.prototype.setSourceContent=function(e,n){this.sourceContents[o.toSetString(e)]=n},i.prototype.walkSourceContents=function(e){for(var n=0,t=this.children.length;n<t;n++)this.children[n][d]&&this.children[n].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),n=0,t=i.length;n<t;n++)e(o.fromSetString(i[n]),this.sourceContents[i[n]])},i.prototype.toString=function(){var e='';return this.walk(function(n){e+=n}),e},i.prototype.toStringWithSourceMap=function(e){var n={code:'',line:1,column:0},t=new r(e),i=!1,o=null,a=null,d=null,u=null;return this.walk(function(e,r){n.code+=e,null!==r.source&&null!==r.line&&null!==r.column?((o!==r.source||a!==r.line||d!==r.column||u!==r.name)&&t.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:n.line,column:n.column},name:r.name}),o=r.source,a=r.line,d=r.column,u=r.name,i=!0):i&&(t.addMapping({generated:{line:n.line,column:n.column}}),o=null,i=!1);for(var s=0,m=e.length;s<m;s++)e.charCodeAt(s)===10?(n.line++,n.column=0,s+1===m?(o=null,i=!1):i&&t.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:n.line,column:n.column},name:r.name})):n.column++}),this.walkSourceContents(function(e,n){t.setSourceContent(e,n)}),{code:n.code,map:t}},n.SourceNode=i},function(e){e.exports=require('path')},function(e){e.exports=require('fs')},function(e){e.exports=require('module')}]);