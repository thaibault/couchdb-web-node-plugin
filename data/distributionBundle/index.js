y constraint "'+b.code+'" (given "'+I(_)+'")'+a+"."))}}},v=function(e,t,n,_){var c=[],s=[].concat(n.type?n.type:[]);"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype&&!Object.prototype.hasOwnProperty.call(e,h)&&1===s.length&&Object.prototype.hasOwnProperty.call(i,s[0])&&(e[h]=s[0]);for(var l,p,m=!1,b=o(s);!(l=b()).done;)if(p=l.value,Object.prototype.hasOwnProperty.call(i,p)){if("object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype&&Object.prototype.hasOwnProperty.call(e,h)&&e[h]!==p&&"migrate"===g&&1===s.length&&(e[h]=p,c=r.concat(t+"","migrate nested object type")),"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype&&Object.prototype.hasOwnProperty.call(e,h)&&e[h]===p){var y=K(e,_,r.concat(t+""));if(y.changedPath.length&&(c=y.changedPath),e=y.newDocument,I(e)===I({}))return{newValue:void 0,changedPath:c};m=!0;break}1===s.length&&u('NestedType: Under key "'+t+'" isn\'t of type "'+p+'" (given "'+I(e)+'" of type '+typeof e+")"+a+".")}else if("DateTime"===p){var O=e;if(e=L(e),!(d&&("number"!=typeof e||isNaN(e))||!d&&"string"!=typeof e)){m=!0;break}1===s.length&&u('PropertyType: Property "'+t+'" isn\'t of (valid) type "DateTime" (given"'+I(O).replace(/^"/,"").replace(/"$/,"")+'" of type "'+typeof O+'")'+a+".")}else if(["boolean","integer","number","string"].includes(p)){if(!("number"==typeof e&&isNaN(e)||"integer"!==p&&typeof e!==p||"integer"===p&&parseInt(e,10)!==e)){m=!0;break}1===s.length&&u('PropertyType: Property "'+t+'" isn\'t of (valid) type "'+p+'" (given "'+I(e)+'" of type "'+typeof e+'")'+a+".")}else if("string"==typeof p&&p.startsWith("foreignKey:")){var v=i[p.substring(11)][f].type;if(v===typeof e){m=!0;break}1===s.length&&u('PropertyType: Foreign key property "'+t+'" isn\'t of type "'+v+'" (given "'+I(e)+'" of type "'+typeof e+'")'+a+".")}else{if("any"===p||I(e)===I(p)){m=!0;break}1===s.length&&u('PropertyType: Property "'+t+'" isn\'t value "'+p+'" (given "'+I(e).replace(/^"/,"").replace(/"$/,"")+'" of type "'+typeof e+'")'+a+".")}if(m||u('PropertyType: None of the specified types "'+s.join('", "')+'" for property "'+t+'" matches value "'+I(e).replace(/^"/,"").replace(/"$/,"")+e+'" of type "'+typeof e+'")'+a+"."),"string"==typeof e&&("number"==typeof n.minimumLength&&e.length<n.minimumLength&&u('MinimalLength: Property "'+t+'" must have minimal length '+n.minimumLength+" (given "+e+" with length "+e.length+") "+a+"."),"number"==typeof n.maximumLength&&e.length>n.maximumLength&&u('MaximalLength: Property "'+t+'" must have maximal length '+n.maximumLength+" (given "+e+" with length "+e.length+")"+a+".")),"number"==typeof e&&("number"==typeof n.minimum&&e<n.minimum&&u('Minimum: Property "'+t+'" (type '+n.type+") must satisfy a minimum of "+n.minimum+" (given "+e+" is too low)"+a+"."),"number"==typeof n.maximum&&e>n.maximum&&u('Maximum: Property "'+t+'" (type '+n.type+") must satisfy a maximum of "+n.maximum+" (given "+e+" is too high)"+a+".")),n.selection){var E=Array.isArray(n.selection)?n.selection.map((function(e){return void 0===(null==e?void 0:e.value)?e:e.value})):Object.keys(n.selection);"DateTime"===n.type&&(E=E.map(L)),E.includes(e)||u('Selection: Property "'+t+'" (type '+n.type+') should be one of "'+E.join('", "')+'". But is "'+e+'"'+a+".")}if(n.regularExpressionPattern){for(var P,D,M=[].concat(n.regularExpressionPattern),w=!1,k=o(M);!(P=k()).done;)if(D=P.value,new RegExp(D).test(e)){w=!0;break}w||u('PatternMatch: Property "'+t+'" should match one regular expression pattern "'+M.join('", "')+'" (given "'+e+'")'+a+".")}if(n.invertedRegularExpressionPattern)for(var C,A,T=o([].concat(n.invertedRegularExpressionPattern));!(C=T()).done;)A=C.value,new RegExp(A).test(e)&&u('InvertedPatternMatch: Property "'+t+'" should not match regular expression pattern '+A+' (given "'+e+'")'+a+".");return x(e,t,n,_),I(e)!==I(_)&&(c=r.concat(t+"","value updated")),{newValue:e,changedPath:c}},P=function(e,t,n,o,a){var i=t[o];if(!e.writable)if(n){if(Object.prototype.hasOwnProperty.call(n,o)&&I(i)===I(n[o]))return o!==f&&"incremental"===g&&delete t[o],!0;u('Readonly: Property "'+o+'" is not writable (old document "'+I(n)+'")'+a+".")}else u('Readonly: Property "'+o+'" is not writable'+a+".");if(!e.mutable&&n&&Object.prototype.hasOwnProperty.call(n,o)){if(I(i)===I(n[o]))return"incremental"!==g||c.property.name.reserved.concat(m.deleted,f,b).includes(o+"")||delete t[o],!0;"migrate"!==g&&u('Immutable: Property "'+o+'"is not writable (old document "'+I(n)+'")'+a+".")}if(null===i){if(e.nullable)return"incremental"===g&&n&&void 0!==n[o]||delete t[o],n&&Object.prototype.hasOwnProperty.call(n,o)&&(_=r.concat(o+"","delete property")),!0;u('NotNull: Property "'+o+'" should not be "null"'+a+".")}return!1},D=function(e,t,n,_,c){if(!n)for(var i,s,l=o(["onCreateExecution","onCreateExpression"]);!(i=l()).done;)if(s=i.value,Object.prototype.hasOwnProperty.call(e,s)){var d=void 0;try{d=B(e[s],s.endsWith("Expression"),{attachmentsTarget:c,checkPropertyContent:v,model:y,modelName:p,name:_+"",type:s,newDocument:t,oldDocument:n,newValue:void 0,oldValue:void 0,parentNames:r,pathDescription:a,propertySpecification:e})}catch(n){if(function(e){return Object.prototype.hasOwnProperty.call(e,"compilation")}(n)&&u('Compilation: Hook "'+s+'" has invalid code "'+n.code+'" for property "'+_+'": '+n.message+a+"."),function(e){return Object.prototype.hasOwnProperty.call(e,"runtime")}(n)&&u('Runtime: Hook "'+s+'" has throw an error with code "'+n.code+'" for property "'+_+'": '+n.message+a+"."),!Object.prototype.hasOwnProperty.call(n,"empty"))throw n}d&&![null,void 0].includes(d.result)&&(c?c[_]=d.result:t[_]=d.result)}},M=function(e,t,n,_,c){if(!c){if(!Object.prototype.hasOwnProperty.call(t,_))return;e.trim&&"string"==typeof t[_]&&(t[_]=t[_].trim()),e.emptyEqualsNull&&(""===t[_]||Array.isArray(t[_])&&0===t[_].length||null!==t[_]&&"object"==typeof t[_]&&0===Object.keys(t).length)&&(t[_]=null)}for(var i,s,l=o(["onUpdateExecution","onUpdateExpression"]);!(i=l()).done;)if(s=i.value,Object.prototype.hasOwnProperty.call(e,s))try{var d=B(e[s],s.endsWith("Expression"),{attachmentsTarget:c,checkPropertyContent:v,model:y,modelName:p,name:_+"",type:s,newDocument:t,oldDocument:n,newValue:t[_],oldValue:n&&n[_]||void 0,parentNames:r,pathDescription:a,propertySpecification:e});c?c[_]=d.result:t[_]=d.result}catch(n){if(function(e){return Object.prototype.hasOwnProperty.call(e,"compilation")}(n)&&u('Compilation: Hook "'+s+'" has invalid code "'+n.code+'" for property "'+_+'": '+n.message+a+"."),function(e){return Object.prototype.hasOwnProperty.call(e,"runtime")}(n)&&u('Runtime: Hook "'+s+'" has throw an error with code "'+n.code+'" for property "'+_+'": '+n.message+a+"."),!Object.prototype.hasOwnProperty.call(n,"empty"))throw n}},w=Object.keys(y).filter((function(e){return!j.includes(e)}));if("migrate"===g)for(var k,C,A=o(w);!(k=A()).done;)if(C=k.value,y[C].oldName)for(var T,W,N=o([].concat(y[C].oldName));!(T=N()).done;)W=T.value,Object.prototype.hasOwnProperty.call(e,W)&&(e[C]=e[W],delete e[W]);if(!n)for(var S,q=0,F=[m.create.execution,m.create.expression];q<F.length;q++)if(S=F[q],Object.prototype.hasOwnProperty.call(y,S)){var $=void 0;try{$=B(y[S],S.endsWith("Expression"),{checkPropertyContent:v,model:y,modelName:p,type:S,newDocument:e,oldDocument:n,parentNames:r,pathDescription:a}).result}catch(s){if(function(e){return Object.prototype.hasOwnProperty.call(e,"compilation")}(s)&&u('Compilation: Hook "'+S+'" has invalid code "'+s.code+'" for document "'+p+'": '+s.message+a+"."),function(e){return Object.prototype.hasOwnProperty.call(e,"runtime")}(s)&&u('Runtime: Hook "'+S+'" has throw an error with code "'+s.code+'" for document "'+p+'": '+s.message+a+"."),!Object.prototype.hasOwnProperty.call(s,"empty"))throw s}[null,void 0].includes($)||(e=$),s(),p=e[h],0===r.length&&O()}for(var z,H=0,G=[m.update.execution,m.update.expression];H<G.length;H++)if(z=G[H],Object.prototype.hasOwnProperty.call(y,z)){var V=void 0;try{V=B(y[z],z.endsWith("Expression"),{checkPropertyContent:v,model:y,modelName:p,type:z,newDocument:e,oldDocument:n,parentNames:r,pathDescription:a}).result}catch(s){if(function(e){return Object.prototype.hasOwnProperty.call(e,"compilation")}(s)&&u('Compilation: Hook "'+z+'" has invalid code "'+s.code+'" for document "'+p+'": '+s.message+a+"."),function(e){return Object.prototype.hasOwnProperty.call(e,"runtime")}(s)&&u('Runtime: Hook "'+z+'" has throw an error with code "'+s.code+'" for document "'+p+'": '+s.message+a+"."),!Object.prototype.hasOwnProperty.call(s,"empty"))throw s}[void 0,null].includes(V)||(e=V),s(),p=e[h],0===r.length&&O()}for(var J,Y,X=l?Object.keys(e).filter((function(e){return!w.includes(e)})):[],Z=o(w.concat(X));!(J=Z()).done;)if(Y=J.value,m.attachment===Y)for(var Q=function(){var t=te[ee],c=t[0],i=t[1];Object.prototype.hasOwnProperty.call(e,Y)&&null!==e[m.attachment]||(e[m.attachment]={}),n&&!Object.prototype.hasOwnProperty.call(n,Y)&&(n[m.attachment]={});var s=Object.keys(e[m.attachment]).filter((function(t){return null!==e[m.attachment][t].data&&U(c,t,i)})),l=e[m.attachment],p=[];if(n){var d=n[Y];p=Object.keys(d).filter((function(e){return!(Object.prototype.hasOwnProperty.call(l,e)&&Object.prototype.hasOwnProperty.call(l[e],"data")&&null===l[e].data)&&!!d[e]&&(Object.prototype.hasOwnProperty.call(d[e],"data")&&null!==d[e].data||d[e].stub&&!!d[e].digest)&&!!U(c,e,i)}))}for(var f,b,h=i,y=o(s);!(f=y()).done;)b=f.value,D(h,e,n&&n[Y]?n[Y]:null,b,l);for(var x,O,v=o(s);!(x=v()).done;)O=x.value,M(h,e,n&&n[Y]?n[Y]:null,O,l);if(void 0===h.default){if(h.nullable||0<s.length||0<p.length||u('AttachmentMissing: Missing attachment for type "'+c+'"'+a+"."),"fillUp"===g&&0===s.length&&0<p.length)for(var E,P,w=o(p);!(E=w()).done;)P=E.value,null===l[P]?_=r.concat(Y,P,"file removed"):l[P]=n[Y][P]}else if(0===s.length)if(0===p.length)for(var k in h.default)Object.prototype.hasOwnProperty.call(h.default,k)&&(l[k]=h.default[k],_=r.concat(Y,c,"add default file"));else if("fillUp"===g)for(var C,A,T=o(p);!(C=T()).done;)A=C.value,l[A]=n[Y][A]},ee=0,te=Object.entries(y[m.attachment]);ee<te.length;ee++)Q();else{var ne=w.includes(Y)?y[Y]:l;D(ne,e,n,Y),M(ne,e,n,Y),[null,void 0].includes(ne.default)?(!(ne.nullable||Object.prototype.hasOwnProperty.call(e,Y)&&void 0!==e[Y]||n&&Object.prototype.hasOwnProperty.call(n,Y)&&g)&&u('MissingProperty: Missing property "'+Y+'"'+a+"."),(!Object.prototype.hasOwnProperty.call(e,Y)||void 0===e[Y])&&n&&Object.prototype.hasOwnProperty.call(n,Y)&&("fillUp"===g?e[Y]=n[Y]:!g&&(_=r.concat(Y+"","property removed")))):(!Object.prototype.hasOwnProperty.call(e,Y)||[null,void 0].includes(e[Y]))&&(n?null!==e[Y]&&"fillUp"===g?e[Y]=n[Y]:"migrate"===g&&(e[Y]=ne.default,_=r.concat(Y+"","migrate default value")):(e[Y]=ne.default,_=_.concat(Y+"","add default value")))}if(n&&"incremental"===g)for(var re=0,oe=Object.entries(e);re<oe.length;re++){var ae=oe[re],_e=ae[0],ce=ae[1];Object.prototype.hasOwnProperty.call(n,_e)&&!c.property.name.reserved.concat(f,b,m.conflict,m.deleted,m.deletedConflict,m.localSequence,m.revisions,m.revisionsInformation,h).includes(_e)&&(n[_e]===ce||I(n[_e])===I(ce))&&delete e[_e]}for(var ie=0,se=Object.entries(e);ie<se.length;ie++){var ue=se[ie],le=ue[0],pe=ue[1];if(!c.property.name.reserved.concat(b,m.conflict,m.deleted,m.deletedConflict,m.localSequence,m.revisions,m.revisionsInformation,m.strategy).includes(le)){var de=void 0;if(Object.prototype.hasOwnProperty.call(y,le))de=y[le];else if(l)de=l;else{if("migrate"===g){delete e[le],_=r.concat(le+"","migrate removed property");continue}u('Property: Given property "'+le+'" isn\'t specified in model "'+p+'"'+a+".")}if(!de)continue;if(m.attachment===le){var me=pe;for(var fe in me)if(Object.prototype.hasOwnProperty.call(me,fe))for(var be in y[le])if(U(be,fe,y[m.attachment][be])){P(y[m.attachment][be],e,n,fe,a);break}continue}if(P(de,e,n,le,a))continue;var he="string"==typeof de.type&&de.type.endsWith("[]")||Array.isArray(de.type)&&de.type.length&&Array.isArray(de.type[0]);if(he&&![null,void 0].includes(pe)){var ye,xe=pe;Array.isArray(xe)?"number"==typeof de.minimumNumber&&xe.length<de.minimumNumber?u('MinimumArrayLength: Property "'+le+'" (array of length '+xe.length+") doesn't fullfill minimum array length of "+de.minimumNumber+a+"."):"number"==typeof de.maximumNumber&&de.maximumNumber<xe.length&&u('MaximumArrayLength: Property "'+le+'" (array of length '+xe.length+") doesn't fullfill maximum array length of "+de.maximumNumber+a+"."):u('PropertyType: Property "'+le+'" isn\'t of type "array -> '+de.type+'" (given "'+I(xe)+'")'+a+"."),x(xe,le+"",de,n&&Object.prototype.hasOwnProperty.call(n,le)&&n[le]||void 0,["arrayConstraintExecution","arrayConstraintExpression"]);var Oe={};for(var ge in de)Object.prototype.hasOwnProperty.call(de,ge)&&(Oe[ge]="type"===ge?Array.isArray(de[ge])?de[ge][0]:[de[ge].substring(0,de.type.length-2)]:de[ge]);if(1===(null==(ye=Oe.type)?void 0:ye.length)&&Object.prototype.hasOwnProperty.call(i,Oe.type[0]))for(var ve,Ee,Pe=o(xe.slice());!(ve=Pe()).done;)"object"!=typeof(Ee=ve.value)||Object.getPrototypeOf(Ee)!==Object.prototype||Object.prototype.hasOwnProperty.call(Ee,h)||(Ee[h]=Oe.type[0]);for(var De,Me,we=0,ke=o(xe.slice());!(De=ke()).done;)Me=De.value,xe[we]=v(Me,we+1+". value in "+le,Oe).newValue,[null,void 0].includes(xe[we])&&xe.splice(we,1),we+=1;n&&Object.prototype.hasOwnProperty.call(n,le)&&Array.isArray(n[le])&&n[le].length===xe.length&&I(n[le])===I(xe)||(_=r.concat(le+"","array updated"))}else{var Ce=n&&Object.prototype.hasOwnProperty.call(n,le)?n[le]:null,Ae=he?{newValue:null,changedPath:[]}:v(pe,le+"",de,Ce);e[le]=Ae.newValue,Ae.changedPath.length&&(_=Ae.changedPath),[null,void 0].includes(e[le])&&(null!==Ce&&(_=r.concat(le+"","property removed")),("incremental"!==g||null!==Ce)&&delete e[le])}}}for(var Te=0,je=Object.keys(m.constraint);Te<je.length;Te++){var Ie=je[Te],Re=m.constraint[Ie];if(Object.prototype.hasOwnProperty.call(y,Re))for(var Le,Ue=o([].concat(y[Re]));!(Le=Ue()).done;){var We=Le.value,Be=void 0;try{Be=B(We.evaluation,Re===m.constraint.expression,{checkPropertyContent:v,model:y,modelName:p,type:Re,newDocument:e,oldDocument:n,parentNames:r,pathDescription:a})}catch(s){if(function(e){return Object.prototype.hasOwnProperty.call(e,"compilation")}(s)&&u('Compilation: Hook "'+Re+'" has invalid code "'+s.code+'": "'+s.message+'"'+a+"."),function(e){return Object.prototype.hasOwnProperty.call(e,"runtime")}(s)&&u('Runtime: Hook "'+Re+'" has thrown an error with code "'+s.code+'": '+s.message+a+"."),!Object.prototype.hasOwnProperty.call(s,"empty"))throw s}if(Be&&!Be.result){var Ke=Re.replace(/^[^a-zA-Z]+/,"");u(Ke.charAt(0).toUpperCase()+(Ke.substring(1)+": ")+(We.description?t(Function,Object.keys(Be.scope).concat(["return "+We.description.trim()])).apply(void 0,Object.values(Be.scope)):'Model "'+p+'" should satisfy constraint "'+Be.code+'" (given "'+I(e)+'")'+a+"."))}}}if(Object.prototype.hasOwnProperty.call(e,m.attachment)){var Ne=e[m.attachment];("object"!=typeof Ne||Object.getPrototypeOf(Ne)!==Object.prototype)&&u("AttachmentType: given attachment has invalid type"+a+".");var Se=null;if(n&&Object.prototype.hasOwnProperty.call(n,m.attachment)&&null!==(Se=n[m.attachment])&&"object"==typeof Se)for(var qe=0,Fe=Object.entries(Se);qe<Fe.length;qe++){var $e=Fe[qe],ze=$e[0],He=$e[1];if(Object.prototype.hasOwnProperty.call(Ne,ze)){var Ge=Ne[ze];null===Ge||null===Ge.data||Ge.content_type===He.content_type&&(Ge.data===He.data||Ge.digest===He.digest)?((null===Ge||null===Ge.data)&&(_=r.concat(m.attachment,ze,"attachment removed")),"incremental"===g&&delete Ne[ze]):_=r.concat(m.attachment,ze,"attachment updated")}else"fillUp"===g?Ne[ze]=He:g||(_=r.concat(m.attachment,ze,"attachment removed"))}for(var Ve=0,Je=Object.entries(Ne);Ve<Je.length;Ve++){var Ye=Je[Ve],Xe=Ye[0],Ze=Ye[1];[null,void 0].includes(Ze)||null===Ze.data?delete Ne[Xe]:(!Se||!Object.prototype.hasOwnProperty.call(Se,Xe)||Ze.content_type!==Se[Xe].content_type||Ze.data!==Se[Xe].data&&Ze.digest!==Se[Xe].digest)&&(_=r.concat(m.attachment,Xe,"attachment updated"))}0===Object.keys(Ne).length&&delete e[m.attachment];for(var Qe={},et=0,tt=Object.keys(y[m.attachment]);et<tt.length;et++)Qe[tt[et]]=[];for(var nt=0,rt=Object.keys(Ne);nt<rt.length;nt++){for(var ot=rt[nt],at=!1,_t=0,ct=Object.entries(y[m.attachment]);_t<ct.length;_t++){var it=ct[_t],st=it[0],ut=it[1];if(U(st,ot,ut)){Qe[st].push(ot),at=!0;break}}at||u('AttachmentTy(()=>{var __webpack_modules__=[e=>{"use strict";e.exports=require("@babel/runtime/helpers/extends")},e=>{"use strict";e.exports=require("@babel/runtime/helpers/asyncToGenerator")},e=>{"use strict";e.exports=require("@babel/runtime/regenerator")},e=>{"use strict";e.exports=require("clientnode")},,(module,__unused_webpack_exports,__webpack_require__)=>{(function(){function __nested_webpack_require_12__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__nested_webpack_require_12__),n.exports}var __webpack_modules__=[function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{determineAllowedModelRolesMapping:function(){return h},determineGenericIndexablePropertyNames:function(){return x},ensureValidationDocumentPresence:function(){return f},extendModels:function(){return g},getConnectorOptions:function(){return d},initializeConnection:function(){return b},mayStripRepresentation:function(){return m}});var a=n(1),_=n.n(a),c=n(2),i=n.n(c),s=n(3),u=n.n(s),l=n(4),p=n.n(l),d=function(e){return e.couchdb.connector.fetch?{fetch:function(t,n){return l.globalContext.fetch(t,p().extend(!0,p().copy(e.couchdb.connector.fetch),n||{}))}}:{fetch:function(e,t){return l.globalContext.fetch(e,t)}}},m=function(e,t,n){var r=p().represent(e);return r.length<=t?r.length>n?r.substring(0,n-3)+"...":r:"DOCUMENT IS TOO BIG TO REPRESENT"},f=function(){var e=i()(u().mark((function e(t,n,r,o,a,c,i,s){var l,d,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=!0),void 0===c&&(c="_id"),void 0===i&&(i="_rev"),void 0===s&&(s="_design/"),d=_()(((l={})[c]=""+s+n,l.language="javascript",l.version="1.0.634",l),r),e.prev=5,e.next=8,t.get(""+s+n);case 8:return m=e.sent,d[i]=m[i],e.next=12,t.put(d);case 12:a&&console.info(o+" updated."),e.next=27;break;case 15:return e.prev=15,e.t0=e.catch(5),a&&("not_found"===e.t0.error?console.info(o+" not available: create new one."):console.info(o+" couldn't be updated: \""+p().represent(e.t0)+'" create new one.')),e.prev=18,e.next=21,t.put(d);case 21:a&&console.info(o+" installed/updated."),e.next=27;break;case 24:throw e.prev=24,e.t1=e.catch(18),new Error(o+" couldn't be installed/updated: \""+p().represent(e.t1)+'".');case 27:case"end":return e.stop()}}),e,null,[[5,15],[18,24]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=i()(u().mark((function e(t,n){var o,a,_,c,s,m,f,b;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.couchdb,a=p().stringFormat(o.url,o.user.name+":"+o.user.password+"@")+"/"+o.databaseName,t.couchdb.connection=new t.couchdb.connector(a,d(n)),(_=t.couchdb.connection).setMaxListeners(1/0),c=o.model.property.name.special.id,s=o.model.property.name.special.revision,m=u().mark((function(){var e,t;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=b.value,t=_[e].bind(_),_[e]=i()(u().mark((function e(n){var r,a,_,i,l,p,d,m=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=m.length,a=Array(1<r?r-1:0),_=1;_<r;_++)a[_-1]=m[_];return i=a.length&&"object"==typeof a[0]?a[0]:{},e.prev=2,e.next=5,t.apply(void 0,[n].concat(a));case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),l=n[c],p=e.t0,!(l&&o.ignoreNoChangeError&&"name"in p&&"forbidden"===p.name&&"message"in p&&p.message.startsWith("NoChange:"))){e.next=25;break}if(d=s in i?i[s]:n[s],e.t1=l,!(s in n)||["latest","upsert"].includes(d)){e.next=19;break}e.t2=d,e.next=23;break;case 19:return e.next=21,this.get(l);case 21:e.t3=s,e.t2=e.sent[e.t3];case 23:return e.t4=e.t2,e.abrupt("return",{id:e.t1,rev:e.t4,ok:!0});case 25:throw p;case 26:case"end":return e.stop()}}),e,this,[[2,8]])})));case 3:case"end":return n.stop()}}),m)})),f=r(["post","put"]);case 9:if((b=f()).done){e.next=13;break}return e.delegateYield(m(),"t0",11);case 11:e.next=9;break;case 13:return e.prev=13,e.next=16,p().checkReachability(a);case 16:e.next=23;break;case 18:return e.prev=18,e.t1=e.catch(13),console.info("Database could not be retrieved yet: Creating it."),e.next=23,l.globalContext.fetch(a,{method:"PUT"});case 23:return e.abrupt("return",t);case 24:case"end":return e.stop()}}),e,null,[[13,18]])})));return function(){return e.apply(this,arguments)}}(),h=function(e){for(var t=e.property.name.special.allowedRole,n={},r=g(e),o=0,a=Object.entries(r);o<a.length;o++){var c=a[o],i=c[0],s=c[1];if(Object.prototype.hasOwnProperty.call(s,t)){n[i]=_()({properties:{}},v(s[t]));for(var u=0,l=Object.entries(s);u<l.length;u++){var p=l[u],d=p[0],m=p[1];null!==m&&"object"==typeof m&&m.allowedRoles&&(n[i].properties[d]=v(m.allowedRoles))}}else n[i]={properties:{},read:[],write:[]}}return n},y=function(e){return null!==e&&"object"==typeof e},x=function(e,t){var n=e.property.name.special;return Object.keys(t).filter((function(r){var o=t[r];return y(o)&&Object.prototype.hasOwnProperty.call(o,"index")&&o.index||y(o)&&!(Object.prototype.hasOwnProperty.call(o,"index")&&!o.index||e.property.name.reserved.concat(n.additional,n.allowedRole,n.attachment,n.conflict,n.constraint.execution,n.constraint.expression,n.deleted,n.deletedConflict,n.extend,n.maximumAggregatedSize,n.minimumAggregatedSize,n.oldType,n.id,n.revision,n.revisions,n.revisionsInformation,n.type).includes(r)||o.type&&("string"==typeof o.type&&o.type.endsWith("[]")||Array.isArray(o.type)&&o.type.length&&Array.isArray(o.type[0])||Object.prototype.hasOwnProperty.call(e.entities,o.type)))})).concat([n.id,n.revision]).sort()},O=function(e,t,n){if(void 0===n&&(n="_extends"),"_base"===e)return t[e];if(Object.prototype.hasOwnProperty.call(t,"_base")&&(Object.prototype.hasOwnProperty.call(t[e],n)&&t[e][n]?t[e][n]=["_base"].concat(t[e][n]):t[e][n]="_base"),Object.prototype.hasOwnProperty.call(t[e],n)){for(var o,a,_=r([].concat(t[e][n]));!(o=_()).done;)a=o.value,t[e]=p().extend(!0,p().copy(O(a,t,n)),t[e]);delete t[e][n]}return t[e]},g=function(e){for(var t,n=e.property.name.special,r={},o=e.property.name.typeRegularExpressionPattern,a=0,_=Object.keys(e.entities);a<_.length;a++){if(t=_[a],!new RegExp(o.public).test(t)&&!new RegExp(o.private).test(t))throw new Error('Model names have to match "'+o.public+'" or "'+o.private+'" for private one (given name: "'+t+'").');r[t]=O(t,e.entities,n.extend)}for(var c,i=0,s=Object.values(r);i<s.length;i++){c=s[i];for(var u=0,l=Object.entries(c);u<l.length;u++){var d=l[u],m=d[0],f=d[1];if(m===n.attachment)for(var b=f,h=0,y=Object.entries(b);h<y.length;h++){var x=y[h],g=x[0],v=x[1];b[g]=p().extend(!0,p().copy(e.property.defaultSpecification),v)}else[n.allowedRole,n.constraint.execution,n.constraint.expression,n.extend,n.maximumAggregatedSize,n.minimumAggregatedSize,n.oldType].includes(m)||(c[m]=p().extend(!0,p().copy(e.property.defaultSpecification),f))}}return r},v=function(e){if(Array.isArray(e))return{read:e,write:e};if("object"==typeof e){for(var t,n={read:[],write:[]},r=0,o=Object.keys(n);r<o.length;r++)t=o[r],Object.prototype.hasOwnProperty.call(e,t)&&(Array.isArray(e[t])?n[t]=e[t]:n[t]=[e[t]]);return n}return{read:[e],write:[e]}}},function(e){"use strict";e.exports=__webpack_require__(0)},function(e){"use strict";e.exports=__webpack_require__(1)},function(e){"use strict";e.exports=__webpack_require__(2)},function(e){"use strict";e.exports=__webpack_require__(3)},function(e){"use strict";e.exports=__webpack_require__(7)},function(e){"use strict";e.exports=__webpack_require__(8)},function(e){!function(){"use strict";function t(){return(t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return r&&n(a,r.prototype),a}).apply(null,arguments)}function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _={d:function(e,t){for(var n in t)_.o(t,n)&&!_.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},c={};_.r(c),_.d(c,{DatabaseHelper:function(){return i},default:function(){return s}});var i=function(){function e(){}return e.authenticate=function(e,t,n,r,a,_,c,i,s){var u;void 0===t&&(t=null),void 0===n&&(n={}),void 0===r&&(r={admins:{names:[],roles:[]},members:{names:[],roles:[]}}),void 0===_&&(_="_id"),void 0===c&&(c="-type"),void 0===i&&(i="_design/"),void 0===s&&(s=!1);var l=null!==(u=e[c])&&void 0!==u?u:t&&t[c];if(!l)return!0;var p=s?"read":"write",d={properties:{},read:["_admin","readonlyadmin"],write:["_admin"]};Object.prototype.hasOwnProperty.call(e,_)&&e[_].startsWith(i)&&d.read.push("readonlymember");var m,f="Current user doesn't own any role";if(n)if("name"in n||(n.name='"unknown"'),null!=(m=n.roles)&&m.length){if(a&&l&&Object.prototype.hasOwnProperty.call(a,l)){for(var b,h,y=a[l],x=o(["read","write"]);!(b=x()).done;)d[h=b.value]=d[h].concat(y[h]||[]);d.properties=y.properties}for(var O,g,v=d[p],E=o(n.roles);!(O=E()).done;)if(g=O.value,v.includes(g))return!0;f='Current user "'+n.name+'" owns the following roles: "'+n.roles.join('", "')+'"'}else f='Current user "'+n.name+"\" doesn't own any role";throw{unauthorized:"Only users with a least on of these roles are allowed to perform requested "+p+' action: "'+[].concat(d[p]).join('", "')+'". '+f+"."}},e.validateDocumentUpdate=function(e,n,a,_,c,i,s){void 0===i&&(i={});var u=function(e,t,n){var o;throw void 0===t&&(t="forbidden"),void 0===n&&(n={}),r(((o={})[t]=e,o.message=e,o.name=t,o),n)},l=new Date,p=Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds())/1e3,d=!c.dateTimeFormat.startsWith("iso"),m=c.property.name.special,f=m.id,b=m.revision,h=m.type;n&&n[h]&&!e[h]&&(e[h]=n[h]);var y="",x="",O=function(){y=Object.prototype.hasOwnProperty.call(e,f)?e[f]:"",x=Object.prototype.hasOwnProperty.call(e,b)?e[b]:""};if(O(),Object.prototype.hasOwnProperty.call(_,c.property.name.validatedDocumentsCache)&&_[c.property.name.validatedDocumentsCache].has(y+"-"+x))return _[c.property.name.validatedDocumentsCache].delete(y+"-"+x),e;["latest","upsert"].includes(x)&&(n&&Object.prototype.hasOwnProperty.call(n,b)?x=e[b]=n[b]:"latest"===x?u("Revision: No old document available to update."):delete e[b]);var g=c.updateStrategy;Object.prototype.hasOwnProperty.call(e,m.strategy)&&(g=e[m.strategy],delete e[m.strategy]);var v,E={};if("migrate"===g)for(var P=0,D=Object.entries(i);P<D.length;P++){var M=D[P],w=M[0],k=M[1];if(Object.prototype.hasOwnProperty.call(k,m.oldType)&&k[m.oldType])for(var C,A,T=o([].concat(k[m.oldType]));!(C=T()).done;)A=C.value,E[A]=w}s?v=s:JSON&&Object.prototype.hasOwnProperty.call(JSON,"stringify")?v=function(e){return JSON.stringify(e,null,4)}:u('Needed "serializer" is not available.');var j=[m.additional,m.allowedRole,m.constraint.execution,m.constraint.expression,m.create.execution,m.create.expression,m.extend,m.maximumAggregatedSize,m.minimumAggregatedSize,m.oldType,m.update.execution,m.update.expression],I=function(e){return e instanceof Error?""+e:v(e)},R=function(e){return"string"==typeof e?e.trim():""},L=function(e){if(d)null!==e&&"number"!=typeof e&&(e=new Date(e),e=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())/1e3);else if(null!==e){e=new Date("number"!=typeof e||isNaN(e)?e:1e3*e);try{e=e.toISOString()}catch(e){}}return e},U=function(e,t,n){if(n.fileName){if(n.fileName.value)return n.fileName.value===t;if(n.fileName.regularExpressionPattern)return[].concat(n.fileName.regularExpressionPattern).some((function(e){return new RegExp(e).test(t)}))}return e===t},W=function(t,n){if(n||(n=e[m.attachment]),t){for(var r,o=0,a=Object.keys(n);o<a.length;o++)if((r=a[o]).startsWith(t))return r}else{var _=Object.keys(n);if(_.length)return _[0]}return null},B=function(e,n,o){void 0===n&&(n=!1),void 0===o&&(o={});var a=R(e);if(a){var _,c=(n?"return ":"")+a,i=r({},N,{code:c},o),s=Object.keys(i);try{_=t(Function,s.concat([c]))}catch(n){u(I(n),"compilation",{code:c,error:n,scope:i})}var l={code:c,result:void 0,scope:i};try{l.result=_.apply(void 0,s.map((function(e){return i[e]})))}catch(n){u(I(n),"runtime",{code:c,error:n,scope:i})}return l}u("No expression to evaluate provided.","empty")},K=function(e,n,r){void 0===r&&(r=[]);var a=r.length?" in "+r.join(" -> "):"",_=[],s=function(){Object.prototype.hasOwnProperty.call(e,h)||(n&&Object.prototype.hasOwnProperty.call(n,h)&&["fillUp","migrate"].includes(g)?e[h]=n[h]:u('Type: You have to specify a model type via property "'+h+'"'+a+".")),r.length||new RegExp(c.property.name.typeRegularExpressionPattern.public).test(e[h])||u('TypeName: You have to specify a model type which matches "'+c.property.name.typeRegularExpressionPattern.public+'" as public type (given "'+e[h]+'")'+a+"."),Object.prototype.hasOwnProperty.call(i,e[h])||(Object.prototype.hasOwnProperty.call(E,e[h])?e[h]=E[e[h]]:u('Model: Given model "'+e[h]+'" is not specified'+a+"."))};s();var l,p=e[h],y=i[p];Object.prototype.hasOwnProperty.call(y,m.additional)&&y[m.additional]&&(l=y[m.additional]);var x=function(_,c,i,s,l){void 0===l&&(l=["constraintExecution","constraintExpression"]);for(var d,m,f=o(l);!(d=f()).done;)if(m=d.value,Object.prototype.hasOwnProperty.call(i,m)){var b=void 0;try{b=B(i[m].evaluation,m.endsWith("Expression"),{checkPropertyContent:v,model:y,modelName:p,name:c,type:m,newDocument:e,newValue:_,oldDocument:n,oldValue:s,parentNames:r,pathDescription:a,propertySpecification:i})}catch(c){if(function(e){return Object.prototype.hasOwnProperty.call(e,"compilation")}(c)&&u('Compilation: Hook "'+m+'" has invalid code "'+c.code+'": "'+c.message+'"'+a+"."),function(e){return Object.prototype.hasOwnProperty.call(e,"runtime")}(c)&&u('Runtime: Hook "'+m+'" has throw an error with code "'+c.code+'": "'+c.message+'"'+a+"."),!Object.prototype.hasOwnProperty.call(c,"empty"))throw c}if(b&&!b.result){var h=R(i[m].description);u(m.charAt(0).toUpperCase()+(m.substring(1)+": ")+(h?t(Function,Object.keys(b.scope).concat(["return "+h])).apply(void 0,Object.values(b.scope)):'Property "'+c+'" should satisfpeMatch: None of the specified attachment types ("'+Object.keys(y[m.attachment]).join('", "')+'") matches given one ("'+ot+'")'+a+".")}for(var lt=0,pt=0,dt=Object.keys(Qe);pt<dt.length;pt++){var mt=dt[pt],ft=y[m.attachment][mt];if(Object.prototype.hasOwnProperty.call(Qe,mt)){var bt=Qe[mt].length;"number"==typeof ft.maximumNumber&&bt>ft.maximumNumber&&u("AttachmentMaximum: given number of attachments ("+bt+") doesn't satisfy specified maximum of "+ft.maximumNumber+' from type "'+mt+'"'+a+"."),(!ft.nullable||0!==bt)&&"number"==typeof ft.minimumNumber&&bt<ft.minimumNumber&&u("AttachmentMinimum: given number of attachments ("+bt+") doesn't satisfy specified minimum of "+ft.minimumNumber+' from type "'+mt+'"'+a+".");for(var ht,yt=0,xt=o(Qe[mt]);!(ht=xt()).done;){var Ot,gt,vt=ht.value;if(null!=(Ot=ft.fileName)&&Ot.regularExpressionPattern){for(var Et,Pt,Dt=[].concat(ft.fileName.regularExpressionPattern),Mt=!1,wt=o(Dt);!(Et=wt()).done;)if(Pt=Et.value,new RegExp(Pt).test(vt)){Mt=!0;break}Mt||u('AttachmentName: given attachment name "'+vt+'" doesn\'t satisfy one of specified regular expression patterns "'+Dt.join('", "')+'" from type "'+mt+'"'+a+".")}if(null!=(gt=ft.fileName)&&gt.invertedRegularExpressionPattern)for(var kt,Ct,At=o([].concat(ft.fileName.invertedRegularExpressionPattern));!(kt=At()).done;)Ct=kt.value,new RegExp(Ct).test(vt)&&u('InvertedAttachmentName: given attachment name "'+vt+'" does satisfy specified regular expression pattern "'+Ct.toString()+'" from type "'+mt+'"'+a+".");if(Ne[vt].content_type){if(ft.contentTypeRegularExpressionPattern){for(var Tt,jt,It=[].concat(ft.contentTypeRegularExpressionPattern),Rt=!1,Lt=o(It);!(Tt=Lt()).done;)if(jt=Tt.value,new RegExp(jt).test(Ne[vt].content_type)){Rt=!0;break}Rt||u('AttachmentContentType: given attachment content type "'+Ne[vt].content_type+'" doesn\'t satisfy specified regular expression pattern "'+It.join('", "')+'" from type "'+mt+'"'+a+".")}var Ut=ft.invertedContentTypeRegularExpressionPattern;if(Ut)for(var Wt,Bt,Kt=o([].concat(Ut));!(Wt=Kt()).done;)Bt=Wt.value,new RegExp(Bt).test(Ne[vt].content_type)&&u('InvertedAttachmentContentType: given attachment content type "'+Ne[vt].content_type+'" does satisfy specified regular expression pattern "'+Bt.toString()+'" from type "'+mt+'"'+a+".")}var Nt=0;"length"in Ne[vt]?Nt=Ne[vt].length:"data"in Ne[vt]&&(Nt=Buffer&&"byteLength"in Buffer?Buffer.byteLength(Ne[vt].data,"base64"):Ne[vt].data.length),"number"==typeof ft.minimumSize&&ft.minimumSize>Nt?u("AttachmentMinimumSize: given attachment size "+Nt+" byte doesn't satisfy specified minimum of "+ft.minimumSize+" byte "+a+"."):"number"==typeof ft.maximumSize&&ft.maximumSize<Nt&&u("AttachmentMaximumSize: given attachment size "+Nt+" byte doesn't satisfy specified maximum of "+ft.maximumSize+" byte "+a+"."),yt+=Nt}"number"==typeof ft.minimumAggregatedSize&&ft.minimumAggregatedSize>yt?u('AttachmentAggregatedMinimumSize: given aggregated size of attachments from type "'+mt+'" '+yt+" byte doesn't satisfy specified minimum of "+ft.minimumAggregatedSize+" byte "+a+"."):"number"==typeof ft.maximumAggregatedSize&&ft.maximumAggregatedSize<yt&&u('AttachmentAggregatedMaximumSize: given aggregated size of attachments from type "'+mt+'" '+yt+" byte doesn't satisfy specified maximum of "+ft.maximumAggregatedSize+" byte "+a+"."),lt+=yt}}Object.prototype.hasOwnProperty.call(y,m.minimumAggregatedSize)&&"number"==typeof y[m.minimumAggregatedSize]&&y[m.minimumAggregatedSize]>lt?u("AggregatedMinimumSize: given aggregated size "+lt+" byte doesn't satisfy specified minimum of "+y[m.minimumAggregatedSize]+" byte "+a+"."):"number"==typeof y[m.maximumAggregatedSize]&&y[m.maximumAggregatedSize]<lt&&u("AggregatedMaximumSize: given aggregated size "+lt+" byte doesn't satisfy specified maximum of "+y[m.maximumAggregatedSize]+" byte "+a+".")}if(n&&Object.prototype.hasOwnProperty.call(n,m.attachment)&&0===Object.keys(n[m.attachment]).length&&delete n[m.attachment],0===_.length&&n&&"migrate"===g)for(var St,qt=0,Ft=Object.keys(n);qt<Ft.length;qt++)St=Ft[qt],Object.prototype.hasOwnProperty.call(e,St)||(_=r.concat(St,"migrate removed property"));return{changedPath:_,newDocument:e}},N={attachmentWithPrefixExists:function(t){if(Object.prototype.hasOwnProperty.call(e,m.attachment)){var n=e[m.attachment],r=W(t);if(r)return Object.prototype.hasOwnProperty.call(n[r],"stub")&&n[r].stub||Object.prototype.hasOwnProperty.call(n[r],"data")&&![null,void 0].includes(n[r].data)}return!1},checkDocument:K,getFileNameByPrefix:W,serialize:I,id:y,revision:x,idName:f,revisionName:b,specialNames:m,typeName:h,modelConfiguration:c,models:i,now:l,nowUTCTimestamp:p,securitySettings:_,userContext:a};if(e[m.attachment])for(var S,q=0,F=Object.values(e[m.attachment]);q<F.length;q++)S=F[q],Object.prototype.hasOwnProperty.call(S,"contentType")&&(S.content_type=S.contentType,delete S.contentType);var $=K(e,n);return(!$.newDocument._deleted||n)&&($.newDocument._deleted&&$.newDocument._deleted!==(null==n?void 0:n._deleted)||$.changedPath.length)||u("NoChange: No new data given. new document: "+I(e)+"; old document: "+I(n)+"."),Object.prototype.hasOwnProperty.call(_,c.property.name.validatedDocumentsCache)?_[c.property.name.validatedDocumentsCache].add(y+"-"+x):_[c.property.name.validatedDocumentsCache]=new Set([y+"-"+x]),$.newDocument},e}(),s=i;e.exports=c}()},,function(e){"use strict";e.exports=__webpack_require__(9)},function(e){"use strict";e.exports=__webpack_require__(10)},function(e){"use strict";e.exports=__webpack_require__(11)},function(e){"use strict";e.exports=__webpack_require__(12)},,function(__unused_webpack_module,__nested_webpack_exports__,__nested_webpack_require_38767__){"use strict";function _createForOfIteratorHelperLoose(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}__nested_webpack_require_38767__.d(__nested_webpack_exports__,{BL:function(){return start},sT:function(){return stop},ur:function(){return restart}});var _this,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_38767__(1),_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default=__nested_webpack_require_38767__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__nested_webpack_require_38767__(2),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default=__nested_webpack_require_38767__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__=__nested_webpack_require_38767__(3),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default=__nested_webpack_require_38767__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__),child_process__WEBPACK_IMPORTED_MODULE_3__=__nested_webpack_require_38767__(11),child_process__WEBPACK_IMPORTED_MODULE_3___default=__nested_webpack_require_38767__.n(child_process__WEBPACK_IMPORTED_MODULE_3__),clientnode__WEBPACK_IMPORTED_MODULE_4__=__nested_webpack_require_38767__(4),clientnode__WEBPACK_IMPORTED_MODULE_4___default=__nested_webpack_require_38767__.n(clientnode__WEBPACK_IMPORTED_MODULE_4__),node_fetch__WEBPACK_IMPORTED_MODULE_5__=__nested_webpack_require_38767__(12),node_fetch__WEBPACK_IMPORTED_MODULE_5___default=__nested_webpack_require_38767__.n(node_fetch__WEBPACK_IMPORTED_MODULE_5__),fs__WEBPACK_IMPORTED_MODULE_6__=__nested_webpack_require_38767__(5),fs__WEBPACK_IMPORTED_MODULE_6___default=__nested_webpack_require_38767__.n(fs__WEBPACK_IMPORTED_MODULE_6__),path__WEBPACK_IMPORTED_MODULE_7__=__nested_webpack_require_38767__(6),path__WEBPACK_IMPORTED_MODULE_7___default=__nested_webpack_require_38767__.n(path__WEBPACK_IMPORTED_MODULE_7__),_helper__WEBPACK_IMPORTED_MODULE_8__=__nested_webpack_require_38767__(0);clientnode__WEBPACK_IMPORTED_MODULE_4__.globalContext.fetch=node_fetch__WEBPACK_IMPORTED_MODULE_5___default();var start=function(){var _ref=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark((function _callee(services,configuration){var server,runner,binary;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(server=services.couchdb.server,runner=server.runner,binary=configuration.couchdb.binary,!Object.prototype.hasOwnProperty.call(runner,"configurationFile")){_context.next=15;break}return _context.prev=4,_context.next=7,fs__WEBPACK_IMPORTED_MODULE_6__.promises.mkdir((0,path__WEBPACK_IMPORTED_MODULE_7__.dirname)(runner.configurationFile.path),{recursive:!0});case 7:_context.next=13;break;case 9:if(_context.prev=9,_context.t0=_context.catch(4),"EEXIST"===_context.t0.code){_context.next=13;break}throw _context.t0;case 13:return _context.next=15,fs__WEBPACK_IMPORTED_MODULE_6__.promises.writeFile(runner.configurationFile.path,runner.configurationFile.content,{encoding:configuration.core.encoding});case 15:return server.process=(0,child_process__WEBPACK_IMPORTED_MODULE_3__.spawn)("default"===binary.memoryInMegaByte?runner.binaryFilePath:binary.nodePath,("default"===binary.memoryInMegaByte?[]:["--max-old-space-size="+binary.memoryInMegaByte,runner.binaryFilePath]).concat(runner.arguments?runner.arguments:[]),{cwd:eval("process").cwd(),env:Object.prototype.hasOwnProperty.call(runner,"environment")?_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},eval("process").env,runner.environment):eval("process").env,shell:!0,stdio:"inherit"}),new Promise((function(e,t){for(var n,r,o=_createForOfIteratorHelperLoose(clientnode__WEBPACK_IMPORTED_MODULE_4__.CloseEventNames);!(n=o()).done;)r=n.value,server.process.on(r,clientnode__WEBPACK_IMPORTED_MODULE_4___default().getProcessCloseHandler(e,t,{process:server.process,reason:r}))})).then((function(e){var t;null!=(t=services.couchdb)&&null!=(t=t.server)&&t.resolve&&services.couchdb.server.resolve.call(_this,e)}),(function(e){var t;null!=(t=services.couchdb)&&null!=(t=t.server)&&t.resolve&&services.couchdb.server.reject.call(_this,e)})),_context.next=19,clientnode__WEBPACK_IMPORTED_MODULE_4___default().checkReachability(clientnode__WEBPACK_IMPORTED_MODULE_4___default().stringFormat(configuration.couchdb.url,""),{wait:!0});case 19:case"end":return _context.stop()}}),_callee,null,[[4,9]])})));return function(){return _ref.apply(this,arguments)}}(),restart=(t=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark((function e(t){var n,r,o,a,_,c;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.configuration,r=t.pluginAPI,o=t.services,a=o.couchdb.server,_=a.resolve,c=a.reject,a.resolve=a.reject=clientnode__WEBPACK_IMPORTED_MODULE_4___default().noop,e.next=7,stop(o,n);case 7:return a.resolve=_,a.reject=c,e.next=11,start(o,n);case 11:return(0,_helper__WEBPACK_IMPORTED_MODULE_8__.initializeConnection)(o,n),e.next=14,r.callStack(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},t,{hook:"restartCouchdb"}));case 14:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),stop=function(){var e=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark((function e(t,n){var r,o;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.couchdb,o=n.couchdb,r.connection&&r.connection.close(),r.server.process&&r.server.process.kill("SIGINT"),e.next=6,clientnode__WEBPACK_IMPORTED_MODULE_4___default().checkUnreachability(clientnode__WEBPACK_IMPORTED_MODULE_4___default().stringFormat(o.url,""),{wait:!0});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}],__webpack_module_cache__={};__nested_webpack_require_12__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_12__.d(t,{a:t}),t},__nested_webpack_require_12__.d=function(e,t){for(var n in t)__nested_webpack_require_12__.o(t,n)&&!__nested_webpack_require_12__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_12__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_12__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};(function(){"use strict";function _createForOfIteratorHelperLoose(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}__nested_webpack_require_12__.r(__nested_webpack_exports__),__nested_webpack_require_12__.d(__nested_webpack_exports__,{Database:function(){return _Database},default:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_12__(1),_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default=__nested_webpack_require_12__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__nested_webpack_require_12__(2),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default=__nested_webpack_require_12__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__=__nested_webpack_require_12__(3),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default=__nested_webpack_require_12__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__),clientnode__WEBPACK_IMPORTED_MODULE_3__=__nested_webpack_require_12__(4),clientnode__WEBPACK_IMPORTED_MODULE_3___default=__nested_webpack_require_12__.n(clientnode__WEBPACK_IMPORTED_MODULE_3__),fs__WEBPACK_IMPORTED_MODULE_4__=__nested_webpack_require_12__(5),fs__WEBPACK_IMPORTED_MODULE_4___default=__nested_webpack_require_12__.n(fs__WEBPACK_IMPORTED_MODULE_4__),path__WEBPACK_IMPORTED_MODULE_5__=__nested_webpack_require_12__(6),path__WEBPACK_IMPORTED_MODULE_5___default=__nested_webpack_require_12__.n(path__WEBPACK_IMPORTED_MODULE_5__),pouchdb_node__WEBPACK_IMPORTED_MODULE_6__=__nested_webpack_require_12__(9),pouchdb_node__WEBPACK_IMPORTED_MODULE_6___default=__nested_webpack_require_12__.n(pouchdb_node__WEBPACK_IMPORTED_MODULE_6__),pouchdb_find__WEBPACK_IMPORTED_MODULE_7__=__nested_webpack_require_12__(10),pouchdb_find__WEBPACK_IMPORTED_MODULE_7___default=__nested_webpack_require_12__.n(pouchdb_find__WEBPACK_IMPORTED_MODULE_7__),_databaseHelper__WEBPACK_IMPORTED_MODULE_10__=__nested_webpack_require_12__(7),_databaseHelper__WEBPACK_IMPORTED_MODULE_10___default=__nested_webpack_require_12__.n(_databaseHelper__WEBPACK_IMPORTED_MODULE_10__),_helper__WEBPACK_IMPORTED_MODULE_9__=__nested_webpack_require_12__(0),_server__WEBPACK_IMPORTED_MODULE_8__=__nested_webpack_require_12__(14),_Database=function(){function Database(){}return Database.preLoadService=(t=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark((function e(t){var n,r,o,a,_,c,i,s,u,l,p,d,m,f,b,h,y;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.configuration.couchdb,r=t.services,Object.prototype.hasOwnProperty.call(r,"couchdb")||(r.couchdb={}),o=r.couchdb,Object.prototype.hasOwnProperty.call(o,"connector")||(a=n.model.property.name.special.id,_=n.model.property.name.special.revision,o.connector=pouchdb_node__WEBPACK_IMPORTED_MODULE_6___default(),c=o.connector.prototype.bulkDocs,o.connector.plugin({bulkDocs:function(){var e=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark((function e(t){var r,o,i,s,u,l,p,d,m,f,b,h,y,x,O,g,v,E,P=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=P.length,i=Array(1<o?o-1:0),s=1;s<o;s++)i[s-1]=P[s];return u=0<i.length&&i[i.length-1]===Database.toggleLatestRevisionDetermining,l=u?!n.skipLatestRevisionDetermining:n.skipLatestRevisionDetermining,u&&i.pop(),p=!Array.isArray(t)&&null!==t&&"object"==typeof t&&a in t?[t]:t,null!=(r=n.connector.fetch)&&r.timeout&&(0===i.length||"object"!=typeof i[0])&&i.unshift({timeout:n.connector.fetch.timeout}),e.next=8,c.call.apply(c,[this,p].concat(i));case 8:d=e.sent,m=[],f=[],b=0,h=_createForOfIteratorHelperLoose(d);case 13:if((y=h()).done){e.next=36;break}if(x=y.value,"object"!=typeof p[b]){e.next=33;break}if(!(_ in p[b])||"conflict"!==x.name||!["latest","upsert"].includes(p[b][_])){e.next=21;break}f.push(p[b]),m.push(b),e.next=33;break;case 21:if(!(a in p[b]&&n.ignoreNoChangeError&&"name"in x&&"forbidden"===x.name&&"message"in x&&x.message.startsWith("NoChange:"))){e.next=33;break}if(d[b]={id:p[b][a],ok:!0},l){e.next=33;break}if(!(_ in p[b])||["latest","upsert"].includes(p[b][_])){e.next=28;break}e.t0=p[b][_],e.next=32;break;case 28:return e.next=30,this.get(d[b].id);case 30:e.t1=_,e.t0=e.sent[e.t1];case 32:d[b].rev=e.t0;case 33:b+=1;case 34:e.next=13;break;case 36:if(!f.length){e.next=43;break}return p=f,u&&i.push(Database.toggleLatestRevisionDetermining),e.next=41,this.bulkDocs.apply(this,[p].concat(i));case 41:for(O=e.sent,g=_createForOfIteratorHelperLoose(O);!(v=g()).done;)E=v.value,d[m.shift()]=E;case 43:return e.abrupt("return",d);case 44:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}),n.debug&&o.connector.debug.enable("*"),o.connector=o.connector.plugin(pouchdb_find__WEBPACK_IMPORTED_MODULE_7___default())),Object.prototype.hasOwnProperty.call(o,"server")){e.next=36;break}o.server={},i=[],s=_createForOfIteratorHelperLoose([].concat(n.binary.runner));case 8:if((u=s()).done){e.next=34;break}l=u.value,p=_createForOfIteratorHelperLoose([].concat(l.location));case 11:if((d=p()).done){e.next=30;break}m=d.value,f=_createForOfIteratorHelperLoose([].concat(l.name));case 14:if((b=f()).done){e.next=26;break}return h=b.value,y=(0,path__WEBPACK_IMPORTED_MODULE_5__.resolve)(m,h),i.push(y),e.next=20,clientnode__WEBPACK_IMPORTED_MODULE_3___default().isFile(y);case 20:if(!e.sent){e.next=24;break}return l.binaryFilePath=y,o.server.runner=l,e.abrupt("break",26);case 24:e.next=14;break;case 26:if(!Object.prototype.hasOwnProperty.call(o.server,"runner")){e.next=28;break}return e.abrupt("break",30);case 28:e.next=11;break;case 30:if(!Object.prototype.hasOwnProperty.call(o.server,"runner")){e.next=32;break}return e.abrupt("break",34);case 32:e.next=8;break;case 34:if(Object.prototype.hasOwnProperty.call(o.server,"runner")){e.next=36;break}throw new Error('No binary file in one of the following locations found: "'+i.join('", "')+'".');case 36:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),Database.loadService=function(){function loadService(){return _loadService.apply(this,arguments)}var _loadService=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark((function _callee3(_ref3){var configuration,services,promise,couchdb,urlPrefix,unauthenticatedUserDatabaseConnection,authenticatedUserDatabaseConnection,_i,_arr,type,_iterator6,_step6,name,userDatabaseConnection,_userDatabaseConnecti,_iterator7,_step7,prefix,subPath,fullPath,url,_value,response,changeNeeded,modelConfiguration,specialNames,idName,revisionName,typeName,models,databaseHelperCode,_iterator8,_step8,_type2,code,_i2,_Object$entries,_Object$entries$_i,modelName,model,_i3,_Object$entries2,_Object$entries2$_i,_name,specification,_iterator9,_step9,constraint,_iterator10,_step10,_type,_constraint,migrators,_iterator11,_step11,file,extension,_name2,documents,_iterator12,_step12,document,_forbidden,_iterator13,_step13,retrievedDocument,_document,newDocument,_iterator14,_step14,_name3,result,indexes,_i4,_Object$entries3,_Object$entries3$_i,_modelName,_model,_iterator15,_step15,propertyName,_name4,foundPosition,position,_iterator16,_step16,index,_iterator17,_step17,_index,exists,_i5,_Object$entries4,_Object$entries4$_i,_modelName2,_model2,_iterator18,_step18,_name5;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(configuration=_ref3.configuration,services=_ref3.services,promise=null,couchdb=services.couchdb,!Object.prototype.hasOwnProperty.call(couchdb.server,"runner")){_context3.next=10;break}return _context3.next=6,(0,_server__WEBPACK_IMPORTED_MODULE_8__.BL)(services,configuration);case 6:couchdb.server.restart=_server__WEBPACK_IMPORTED_MODULE_8__.ur,couchdb.server.start=_server__WEBPACK_IMPORTED_MODULE_8__.BL,couchdb.server.stop=_server__WEBPACK_IMPORTED_MODULE_8__.sT,promise=new Promise((function(e,t){couchdb.server.resolve=e,couchdb.server.reject=t}));case 10:if(!Object.prototype.hasOwnProperty.call(couchdb,"connection")){_context3.next=12;break}return _context3.abrupt("return",{couchdb:promise});case 12:if(urlPrefix=clientnode__WEBPACK_IMPORTED_MODULE_3___default().stringFormat(configuration.couchdb.url,configuration.couchdb.user.name+":"+configuration.couchdb.user.password+"@"),!configuration.couchdb.ensureAdminPresence){_context3.next=44;break}return unauthenticatedUserDatabaseConnection=new couchdb.connector(clientnode__WEBPACK_IMPORTED_MODULE_3___default().stringFormat(configuration.couchdb.url,"")+"/_users",(0,_helper__WEBPACK_IMPORTED_MODULE_9__.getConnectorOptions)(configuration)),_context3.prev=15,_context3.next=18,unauthenticatedUserDatabaseConnection.allDocs();case 18:return console.info('No admin user available. Automatically creating admin user "'+configuration.couchdb.user.name+'".'),_context3.next=21,clientnode__WEBPACK_IMPORTED_MODULE_3__.globalContext.fetch(clientnode__WEBPACK_IMPORTED_MODULE_3___default().stringFormat(configuration.couchdb.url,"")+"/"+couchdb.server.runner.adminUserConfigurationPath+"/"+configuration.couchdb.user.name,{body:'"'+configuration.couchdb.user.password+'"',method:"PUT"});case 21:_context3.next=41;break;case 23:if(_context3.prev=23,_context3.t0=_context3.catch(15),"unauthorized"!==_context3.t0.name){_context3.next=40;break}return authenticatedUserDatabaseConnection=new couchdb.connector(urlPrefix+"/_users",(0,_helper__WEBPACK_IMPORTED_MODULE_9__.getConnectorOptions)(configuration)),_context3.prev=27,_context3.next=30,authenticatedUserDatabaseConnection.allDocs();case 30:_context3.next=35;break;case 32:_context3.prev=32,_context3.t1=_context3.catch(27),console.error("Can't login as existing admin user \""+configuration.couchdb.user.name+'": "'+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t1)+'".');case 35:return _context3.prev=35,authenticatedUserDatabaseConnection.close(),_context3.finish(35);case 38:_context3.next=41;break;case 40:console.error("Can't create new admin user \""+configuration.couchdb.user.name+'": "'+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t0)+'".');case 41:return _context3.prev=41,unauthenticatedUserDatabaseConnection.close(),_context3.finish(41);case 44:if(!configuration.couchdb.ensureUserPresence){_context3.next=79;break}_i=0,_arr=[configuration.couchdb.security.admins,configuration.couchdb.security.members];case 46:if(!(_i<_arr.length)){_context3.next=79;break}type=_arr[_i],_iterator6=_createForOfIteratorHelperLoose(type.names);case 49:if((_step6=_iterator6()).done){_context3.next=76;break}return name=_step6.value,userDatabaseConnection=new couchdb.connector(urlPrefix+"/_users",(0,_helper__WEBPACK_IMPORTED_MODULE_9__.getConnectorOptions)(configuration)),_context3.prev=52,_context3.next=55,userDatabaseConnection.get("org.couchdb.user:"+name);case 55:_context3.next=71;break;case 57:if(_context3.prev=57,_context3.t2=_context3.catch(52),"not_found"!==_context3.t2.error){_context3.next=70;break}return _context3.prev=60,_context3.next=63,userDatabaseConnection.put((_userDatabaseConnecti={},_userDatabaseConnecti[configuration.couchdb.model.property.name.special.id]="org.couchdb.user:"+name,_userDatabaseConnecti.name=name,_userDatabaseConnecti.password=name,_userDatabaseConnecti.roles=[].concat(type.roles.includes(name+"s")?name+"s":[]),_userDatabaseConnecti.type="user",_userDatabaseConnecti));case 63:_context3.next=68;break;case 65:throw _context3.prev=65,_context3.t3=_context3.catch(60),new Error("Couldn't create missing user \""+name+'": '+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t3));case 68:_context3.next=71;break;case 70:throw new Error("Couldn't check for presence of user \""+name+'": '+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t2));case 71:return _context3.prev=71,userDatabaseConnection.close(),_context3.finish(71);case 74:_context3.next=49;break;case 76:_i++,_context3.next=46;break;case 79:if(!configuration.couchdb.model.updateConfiguration){_context3.next=134;break}_iterator7=_createForOfIteratorHelperLoose(configuration.couchdb.backend.prefixes);case 81:if((_step7=_iterator7()).done){_context3.next=134;break}prefix=_step7.value,_context3.t4=_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().keys(configuration.couchdb.backend.configuration);case 84:if((_context3.t5=_context3.t4()).done){_context3.next=132;break}if(subPath=_context3.t5.value,!Object.prototype.hasOwnProperty.call(configuration.couchdb.backend.configuration,subPath)){_context3.next=130;break}return fullPath="/"+prefix+(prefix.trim()?"/":"")+subPath,url=""+urlPrefix+fullPath,_value=configuration.couchdb.backend.configuration[subPath],response=void 0,_context3.prev=91,_context3.next=94,clientnode__WEBPACK_IMPORTED_MODULE_3__.globalContext.fetch(url);case 94:response=_context3.sent,_context3.next=100;break;case 97:_context3.prev=97,_context3.t6=_context3.catch(91),console.warn('Configuration "'+fullPath+'" (with desired value "'+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_value)+"\") couldn't be determined: "+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t6));case 100:if(!response){_context3.next=130;break}if(!response.ok){_context3.next=129;break}if(changeNeeded=!0,"function"!=typeof response.text){_context3.next=115;break}return _context3.prev=104,_context3.t7=_value,_context3.next=108,response["string"==typeof _value?"text":"json"]();case 108:_context3.t8=_context3.sent,changeNeeded=_context3.t7===_context3.t8,_context3.next=115;break;case 112:_context3.prev=112,_context3.t9=_context3.catch(104),console.warn('Error checking curent value of "'+fullPath+'" to be "'+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_value)+'": '+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t9));case 115:if(!changeNeeded){_context3.next=126;break}return _context3.prev=116,_context3.next=119,clientnode__WEBPACK_IMPORTED_MODULE_3__.globalContext.fetch(url,{body:'"'+configuration.couchdb.backend.configuration[subPath]+'"',method:"PUT"});case 119:_context3.next=124;break;case 121:_context3.prev=121,_context3.t10=_context3.catch(116),console.error('Configuration "'+fullPath+'" couldn\'t be applied to "'+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_value)+'": '+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t10));case 124:_context3.next=127;break;case 126:console.info('Configuration "'+fullPath+'" is already set to desired value "'+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_value)+'".');case 127:_context3.next=130;break;case 129:console.info('Configuration "'+fullPath+'" does not exist (desired value "'+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_value)+'"). Response code is '+response.status+".");case 130:_context3.next=84;break;case 132:_context3.next=81;break;case 134:return _context3.next=136,(0,_helper__WEBPACK_IMPORTED_MODULE_9__.initializeConnection)(services,configuration);case 136:if(!configuration.couchdb.ensureSecuritySettingsPresence){_context3.next=145;break}return _context3.prev=137,_context3.next=140,clientnode__WEBPACK_IMPORTED_MODULE_3__.globalContext.fetch(urlPrefix+"/"+configuration.couchdb.databaseName+"/_security",{body:JSON.stringify(configuration.couchdb.security),method:"PUT"});case 140:_context3.next=145;break;case 142:_context3.prev=142,_context3.t11=_context3.catch(137),console.error("Security object couldn't be applied.: "+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t11));case 145:if(modelConfiguration=clientnode__WEBPACK_IMPORTED_MODULE_3___default().copy(configuration.couchdb.model),delete modelConfiguration.property.defaultSpecification,delete modelConfiguration.entities,specialNames=modelConfiguration.property.name.special,idName=specialNames.id,revisionName=specialNames.revision,typeName=specialNames.type,models=(0,_helper__WEBPACK_IMPORTED_MODULE_9__.extendModels)(configuration.couchdb.model),!configuration.couchdb.model.updateValidation){_context3.next=214;break}return _context3.next=154,fs__WEBPACK_IMPORTED_MODULE_4__.promises.readFile(eval("require.resolve('./databaseHelper')"),{encoding:configuration.core.encoding,flag:"r"});case 154:databaseHelperCode=_context3.sent,_iterator8=_createForOfIteratorHelperLoose([{description:"Model specification",methodName:"validateDocumentUpdate",name:"validation",serializedParameter:JSON.stringify(modelConfiguration)+", "+JSON.stringify(models)},{description:"Authorisation",methodName:"authenticate",name:"authentication",serializedParameter:JSON.stringify((0,_helper__WEBPACK_IMPORTED_MODULE_9__.determineAllowedModelRolesMapping)(configuration.couchdb.model))+", '"+idName+"', '"+typeName+"', '"+specialNames.designDocumentNamePrefix+"'"}]);case 156:if((_step8=_iterator8()).done){_context3.next=171;break}_type2=_step8.value,code="function(...parameters) {\n    return require('helper').default."+_type2.methodName+"(...parameters.concat(["+_type2.serializedParameter+"]))\n}",_context3.prev=159,new Function("return "+code),_context3.next=166;break;case 163:throw _context3.prev=163,_context3.t12=_context3.catch(159),new Error("Generated "+_type2.name+' code "'+code+"\" doesn't compile: "+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t12));case 166:return configuration.core.debug&&console.debug(_type2.name+' code: \n\n"'+code+'" intgrated.'),_context3.next=169,(0,_helper__WEBPACK_IMPORTED_MODULE_9__.ensureValidationDocumentPresence)(couchdb.connection,_type2.name,{helper:databaseHelperCode,validate_doc_update:code},_type2.description,!0,idName,revisionName,specialNames.designDocumentNamePrefix);case 169:_context3.next=156;break;case 171:_i2=0,_Object$entries=Object.entries(models);case 172:if(!(_i2<_Object$entries.length)){_context3.next=214;break}_Object$entries$_i=_Object$entries[_i2],modelName=_Object$entries$_i[0],model=_Object$entries$_i[1],_i3=0,_Object$entries2=Object.entries(model);case 175:if(!(_i3<_Object$entries2.length)){_context3.next=211;break}if(_Object$entries2$_i=_Object$entries2[_i3],_name=_Object$entries2$_i[0],specification=_Object$entries2$_i[1],![specialNames.constraint.execution,specialNames.constraint.expression].includes(_name)){_context3.next=193;break}_iterator9=_createForOfIteratorHelperLoose([].concat(specification));case 179:if((_step9=_iterator9()).done){_context3.next=191;break}if(constraint=_step9.value,!constraint.description){_context3.next=189;break}_context3.prev=182,new Function("return "+constraint.description),_context3.next=189;break;case 186:throw _context3.prev=186,_context3.t13=_context3.catch(182),new Error('Specified constraint description "'+constraint.description+'" for model "'+modelName+'" doesn\'t compile: "'+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t13)+'".');case 189:_context3.next=179;break;case 191:_context3.next=208;break;case 193:_iterator10=_createForOfIteratorHelperLoose(["conflictingConstraintExpression","conflictingConstraintExecution","constraintExpression","constraintExecution"]);case 194:if((_step10=_iterator10()).done){_context3.next=208;break}if(_type=_step10.value,null===specification||"object"!=typeof specification){_context3.next=206;break}if(_constraint=specification[_type],null==_constraint||!_constraint.description){_context3.next=206;break}_context3.prev=199,new Function(_constraint.description),_context3.next=206;break;case 203:throw _context3.prev=203,_context3.t14=_context3.catch(199),new Error('Specified constraint description "'+_constraint.description+'" for model "'+modelName+'" in property "'+_name+'" as "'+_type+'" doesn\'t compile: "'+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t14)+'".');case 206:_context3.next=194;break;case 208:_i3++,_context3.next=175;break;case 211:_i2++,_context3.next=172;break;case 214:if(!configuration.couchdb.model.autoMigrationPath){_context3.next=319;break}return migrators={},_context3.next=218,clientnode__WEBPACK_IMPORTED_MODULE_3___default().isDirectory((0,path__WEBPACK_IMPORTED_MODULE_5__.resolve)(configuration.couchdb.model.autoMigrationPath));case 218:if(!_context3.sent){_context3.next=271;break}return _context3.t15=_createForOfIteratorHelperLoose,_context3.next=222,clientnode__WEBPACK_IMPORTED_MODULE_3___default().walkDirectoryRecursively((0,path__WEBPACK_IMPORTED_MODULE_5__.resolve)(configuration.couchdb.model.autoMigrationPath),configuration.couchdb.debug?clientnode__WEBPACK_IMPORTED_MODULE_3___default().noop:function(e){return!["debug","deprecated"].includes(e.name)});case 222:_context3.t16=_context3.sent,_iterator11=(0,_context3.t15)(_context3.t16);case 224:if((_step11=_iterator11()).done){_context3.next=271;break}if(file=_step11.value,extension=(0,path__WEBPACK_IMPORTED_MODULE_5__.extname)(file.name),_name2=(0,path__WEBPACK_IMPORTED_MODULE_5__.basename)(file.name,extension),".json"!==extension){_context3.next=261;break}return documents=void 0,_context3.prev=230,_context3.t17=[],_context3.t18=JSON,_context3.next=235,fs__WEBPACK_IMPORTED_MODULE_4__.promises.readFile(file.path,{encoding:configuration.core.encoding,flag:"r"});case 235:_context3.t19=_context3.sent,_context3.t20=_context3.t18.parse.call(_context3.t18,_context3.t19),documents=_context3.t17.concat.call(_context3.t17,_context3.t20),_context3.next=243;break;case 240:throw _context3.prev=240,_context3.t21=_context3.catch(230),new Error('Parsing document "'+file.path+'" to include by automigration of has failed: '+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t21));case 243:1===documents.length&&(!documents[0][idName]&&(documents[0][idName]=_name2),!documents[0][revisionName]&&(documents[0][revisionName]="upsert")),_iterator12=_createForOfIteratorHelperLoose(documents);case 245:if((_step12=_iterator12()).done){_context3.next=259;break}return document=_step12.value,_context3.prev=247,_context3.next=250,couchdb.connection.put(document);case 250:_context3.next=256;break;case 252:throw _context3.prev=252,_context3.t22=_context3.catch(247),null!=(_forbidden=_context3.t22.forbidden)&&_forbidden.startsWith("NoChange:")&&console.info('Including document "'+document[idName]+'" of type "'+document[typeName]+"\" hasn't changed existing document."),new Error('Migrating document "'+document[idName]+'" of type "'+document[typeName]+'" has failed: '+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t22));case 256:console.info('Including document "'+document[idName]+'" of type "'+document[typeName]+'" was successful.');case 257:_context3.next=245;break;case 259:_context3.next=269;break;case 261:if(![".js"].includes((0,path__WEBPACK_IMPORTED_MODULE_5__.extname)(file.name))){_context3.next=265;break}migrators[file.path]=eval("require('"+file.path+"')").default,_context3.next=269;break;case 265:if(![".mjs"].includes((0,path__WEBPACK_IMPORTED_MODULE_5__.extname)(file.name))){_context3.next=269;break}return _context3.next=268,eval("import('"+file.path+"')");case 268:migrators[file.path]=_context3.sent.default;case 269:_context3.next=224;break;case 271:return _context3.t23=_createForOfIteratorHelperLoose,_context3.next=274,couchdb.connection.allDocs({include_docs:!0});case 274:_context3.t24=_context3.sent.rows,_iterator13=(0,_context3.t23)(_context3.t24);case 276:if((_step13=_iterator13()).done){_context3.next=319;break}if(retrievedDocument=_step13.value,"string"==typeof retrievedDocument.id&&retrievedDocument.id.startsWith(configuration.couchdb.model.property.name.special.designDocumentNamePrefix)){_context3.next=317;break}_document=retrievedDocument.doc,newDocument=clientnode__WEBPACK_IMPORTED_MODULE_3___default().copy(_document),newDocument[configuration.couchdb.model.property.name.special.strategy]="migrate",_iterator14=_createForOfIteratorHelperLoose(Object.keys(migrators).sort());case 283:if((_step14=_iterator14()).done){_context3.next=296;break}_name3=_step14.value,result=null,_context3.prev=286,result=migrators[_name3](newDocument,{configuration,databaseHelper:_databaseHelper__WEBPACK_IMPORTED_MODULE_10___default(),Tools:clientnode__WEBPACK_IMPORTED_MODULE_3___default(),idName,typeName,migrators,models,modelConfiguration,selfFilePath:_name3,services}),_context3.next=293;break;case 290:throw _context3.prev=290,_context3.t25=_context3.catch(286),new Error('Running migrater "'+_name3+'" in document '+(0,_helper__WEBPACK_IMPORTED_MODULE_9__.mayStripRepresentation)(_document,configuration.couchdb.maximumRepresentationTryLength,configuration.couchdb.maximumRepresentationLength)+'" failed: '+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t25));case 293:result&&(newDocument=result,console.info('Running migrater "'+_name3+'" for document "'+newDocument[idName]+'" (of type "'+newDocument[typeName]+'") was successful.'));case 294:_context3.next=283;break;case 296:_context3.prev=296,_databaseHelper__WEBPACK_IMPORTED_MODULE_10___default().validateDocumentUpdate(clientnode__WEBPACK_IMPORTED_MODULE_3___default().copy(newDocument),clientnode__WEBPACK_IMPORTED_MODULE_3___default().copy(_document),{db:configuration.couchdb.databaseName,name:configuration.couchdb.user.name,roles:["_admin"]},clientnode__WEBPACK_IMPORTED_MODULE_3___default().copy(configuration.couchdb.security),modelConfiguration,models),_context3.next=308;break;case 300:if(_context3.prev=300,_context3.t26=_context3.catch(296),!Object.prototype.hasOwnProperty.call(_context3.t26,"forbidden")){_context3.next=307;break}return _context3.t26.forbidden.startsWith("NoChange:")||console.warn('Document "'+(0,_helper__WEBPACK_IMPORTED_MODULE_9__.mayStripRepresentation)(_document,configuration.couchdb.maximumRepresentationTryLength,configuration.couchdb.maximumRepresentationLength)+"\" doesn't satisfy its schema (and can not be migrated automatically): "+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t26)),_context3.abrupt("continue",317);case 307:throw _context3.t26;case 308:return _context3.prev=308,_context3.next=311,couchdb.connection.put(newDocument);case 311:_context3.next=316;break;case 313:throw _context3.prev=313,_context3.t27=_context3.catch(308),new Error('Replacing auto migrated document "'+newDocument[idName]+'" has failed: '+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t27));case 316:console.info('Auto migrating document "'+newDocument[idName]+'" was successful.');case 317:_context3.next=276;break;case 319:if(!configuration.couchdb.createGenericFlatIndex||!configuration.couchdb.model.autoMigrationPath){_context3.next=374;break}return _context3.next=322,couchdb.connection.getIndexes();case 322:indexes=_context3.sent.indexes,_i4=0,_Object$entries3=Object.entries(models);case 324:if(!(_i4<_Object$entries3.length)){_context3.next=355;break}if(_Object$entries3$_i=_Object$entries3[_i4],_modelName=_Object$entries3$_i[0],_model=_Object$entries3$_i[1],!new RegExp(configuration.couchdb.model.property.name.typeRegularExpressionPattern.public).test(_modelName)){_context3.next=352;break}return _context3.next=329,couchdb.connection.createIndex({index:{ddoc:_modelName+"-GenericIndex",fields:[typeName],name:_modelName+"-GenericIndex"}});case 329:_iterator15=_createForOfIteratorHelperLoose((0,_helper__WEBPACK_IMPORTED_MODULE_9__.determineGenericIndexablePropertyNames)(configuration.couchdb.model,_model));case 330:if((_step15=_iterator15()).done){_context3.next=352;break}propertyName=_step15.value,_name4=_modelName+"-"+propertyName+"-GenericIndex",foundPosition=-1,position=0,_iterator16=_createForOfIteratorHelperLoose(indexes);case 336:if((_step16=_iterator16()).done){_context3.next=344;break}if(index=_step16.value,index.name!==_name4){_context3.next=341;break}return foundPosition=position,_context3.abrupt("break",344);case 341:position+=1;case 342:_context3.next=336;break;case 344:if(-1!==foundPosition){_context3.next=349;break}return _context3.next=347,couchdb.connection.createIndex({index:{ddoc:_name4,fields:[typeName,propertyName],name:_name4}});case 347:_context3.next=350;break;case 349:indexes.slice(position,1);case 350:_context3.next=330;break;case 352:_i4++,_context3.next=324;break;case 355:_iterator17=_createForOfIteratorHelperLoose(indexes);case 356:if((_step17=_iterator17()).done){_context3.next=374;break}if(_index=_step17.value,!_index.name.endsWith("-GenericIndex")){_context3.next=372;break}exists=!1,_i5=0,_Object$entries4=Object.entries(models);case 361:if(!(_i5<_Object$entries4.length)){_context3.next=369;break}if(_Object$entries4$_i=_Object$entries4[_i5],_modelName2=_Object$entries4$_i[0],_model2=_Object$entries4$_i[1],!_index.name.startsWith(_modelName2+"-")){_context3.next=366;break}for(_iterator18=_createForOfIteratorHelperLoose((0,_helper__WEBPACK_IMPORTED_MODULE_9__.determineGenericIndexablePropertyNames)(configuration.couchdb.model,_model2));!(_step18=_iterator18()).done;)_name5=_step18.value,[_modelName2+"-"+_name5+"-GenericIndex",_modelName2+"-GenericIndex"].includes(_index.name)&&(exists=!0);return _context3.abrupt("break",369);case 366:_i5++,_context3.next=361;break;case 369:if(exists){_context3.next=372;break}return _context3.next=372,couchdb.connection.deleteIndex(_index);case 372:_context3.next=356;break;case 374:if(!configuration.couchdb.model.triggerInitialCompaction){_context3.next=383;break}return _context3.prev=375,_context3.next=378,couchdb.connection.compact();case 378:_context3.next=383;break;case 380:_context3.prev=380,_context3.t28=_context3.catch(375),console.warn("Initial database compaction has failed: "+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(_context3.t28));case 383:return _context3.abrupt("return",{couchdb:promise});case 384:case"end":return _context3.stop()}}),_callee3,null,[[15,23,41,44],[27,32,35,38],[52,57,71,74],[60,65],[91,97],[104,112],[116,121],[137,142],[159,163],[182,186],[199,203],[230,240],[247,252],[286,290],[296,300],[308,313],[375,380]])})));return loadService}(),Database.postLoadService=function(e){var t=e.configuration.couchdb,n=e.pluginAPI,r=e.services.couchdb,o=0;setInterval((function(){0<o&&(console.info("No additional errors (initially got "+o+" errors through) occurred during observing changes stream for 30 seconds. Clearing saved number of errors through."),o=0)}),3e4);var a=clientnode__WEBPACK_IMPORTED_MODULE_3___default().debounce(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark((function _(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return r.changesStream&&r.changesStream.cancel(),r.changesStream=r.connection.changes(t.changesStream),r.changesStream.on("error",_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark((function t(n){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(3<(o+=1))){t.next=9;break}return console.warn("Observing changes feed throws an error for "+o+" times through: "+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(n)+". Restarting database server and reinitialize changes stream..."),o=0,r.changesStream.cancel(),t.next=7,r.server.restart(e);case 7:t.next=10;break;case 9:console.warn("Observing changes feed throws an error for "+o+" times through: "+clientnode__WEBPACK_IMPORTED_MODULE_3___default().represent(n)+". Reinitializing changes stream...");case 10:a();case 11:case"end":return t.stop()}}),t)})))),_.next=5,n.callStack(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},e,{data:r.changesStream,hook:"couchdbInitializeChangesStream"}));case 5:case"end":return _.stop()}}),_)}))));return t.attachAutoRestarter&&a(),Promise.resolve()},Database.shouldExit=function(){var e=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark((function e(t){var n,r,o;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.configuration,r=t.services,e.next=3,(0,_server__WEBPACK_IMPORTED_MODULE_8__.sT)(r,n);case 3:return delete r.couchdb,o="log.txt",e.next=7,clientnode__WEBPACK_IMPORTED_MODULE_3___default().isFile(o);case 7:if(!e.sent){e.next=10;break}return e.next=10,fs__WEBPACK_IMPORTED_MODULE_4__.promises.unlink(o);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Database;var t}();_Database.toggleLatestRevisionDetermining=Symbol("toggleLatestRevisionDetermining");var __WEBPACK_DEFAULT_EXPORT__=_Database})(),module.exports=__nested_webpack_exports__})()},,e=>{"use strict";e.exports=require("fs")},e=>{"use strict";e.exports=require("path")},e=>{"use strict";e.exports=require("pouchdb-node")},e=>{"use strict";e.exports=require("pouchdb-find")},e=>{"use strict";e.exports=require("child_process")},e=>{"use strict";e.exports=require("pouchdb-node/node_modules/node-fetch/lib/index.js")}],__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}var __webpack_exports__=__webpack_require__(5);module.exports=__webpack_exports__})();